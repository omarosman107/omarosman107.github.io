<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />

	<title>FOX NEW API</title>
	<style type="text/css">
	@charset "UTF-8";
/*!
 *  Font Awesome 4.7.0 by @davegandy - http://fontawesome.io - @fontawesome
 *  License - http://fontawesome.io/license (Font: SIL OFL 1.1, CSS: MIT License)
 */@font-face{font-family:'FontAwesome';src:url('fonts/fontawesome-webfont.eot?v=4.7.0');src:url('fonts/fontawesome-webfont.eot?#iefix&v=4.7.0') format('embedded-opentype'),url('fonts/fontawesome-webfont.woff2?v=4.7.0') format('woff2'),url('fonts/fontawesome-webfont.woff?v=4.7.0') format('woff'),url('fonts/fontawesome-webfont.ttf?v=4.7.0') format('truetype'),url('fonts/fontawesome-webfont.svg?v=4.7.0#fontawesomeregular') format('svg');font-weight:normal;font-style:normal}.fa{display:inline-block;font:normal normal normal 14px/1 FontAwesome;font-size:inherit;text-rendering:auto;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.fa-search:before{content:"\f002"}.fa-check:before{content:"\f00c"}.fa-play-circle-o:before{content:"\f01d"}.fa-play:before{content:"\f04b"}.fa-level-up:before{content:"\f148"}



		.show {
    max-width: 300px;
        margin: 5px;
    display: inline-block;
        -webkit-transition: all 0.3s cubic-bezier(.03,.98,.52,.99);
    transition: all 0.3s cubic-bezier(.03,.98,.52,.99);
    will-change: opacity,transform;
    opacity: .4;

}

.scroller {

white-space: nowrap;
    overflow-x: auto;
    overflow-y: hidden;
    width: auto;
    -webkit-overflow-scrolling: touch;
    transform: translateZ(0);
    -webkit-transform: translateZ(0);
    will-change: transform;
}
body{
	    background-color: #1b1b1b;
margin: 0px;
padding: 0px;
color: white;

}
.showData li{


width: 100%;
max-width: 300px;
display: inline-block;
margin: 10px;
}

	body {
		margin: 0;
		padding: 0;
		            font-family: sans-serif;


	}


		.container .card{
background-color: #252525;	
    border-radius: 3px;
    box-shadow: 0 1px 1px rgba(0,0,0,.1), 0 1px 8px rgba(0,0,0,.1);
    max-width: 600px;
    overflow: hidden;
    position: relative;
    margin: 0 auto 40px;
		}
.container {

    padding: 1px 20px;
    position: relative;
	color: #dcdcdc;
    font-size: 14px;
    line-height: 2em;
    padding-top: 40px;

}
.container .content{
text-align: center;
padding: 20px;
word-wrap: break-word;

}
.header {
	padding: 40px;
	text-align: center;
	background: white;
	    box-shadow: 0 1px 1px rgba(0,0,0,.1), 0 1px 8px rgba(0,0,0,.1);
    z-index: 1;
margin: auto;

}


.overlay {
	z-index: 2;
    position: absolute;
    top: 0px;
    bottom: -1px;
    left: 0px;
    right: 0px;
    letter-spacing: 0px;
    opacity: 0;
    overflow: hidden;
    transition: all 0.23s ease-out;
    background: radial-gradient(at 50% 50%, rgba(50, 50, 50, 0.5) 50%, rgb(50, 50, 50) 100%);
}

.sixteen-nine {
  position: relative;
}
.sixteen-nine:before {
  display: block;
  content: "";
  width: 100%;
  padding-top: 56.25%;
}
.sixteen-nine > .mediacontent {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;

}

.card .top .overlay:hover {
opacity: 1;
}

.overlay .overlay-btn {
    display: flex;
    align-items: center;
    justify-content: center;
    height: 100%;
    font-size: 40px;
    color: #fff;
    text-align: center;
    text-decoration: none;
}
.scroller .show:hover{
transform: scale(1.01);
opacity: 1;
}


.spinner {
  animation: rotator 1.4s linear infinite;
}

@keyframes rotator {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(270deg);
  }
}
.path {
  stroke-dasharray: 187;
  stroke-dashoffset: 0;
  transform-origin: center;
  animation: dash 1.4s ease-in-out infinite, colors 5.6s ease-in-out infinite;
}

@keyframes colors {
  0% {
    stroke: #4285F4;
  }
  25% {
    stroke: #DE3E35;
  }
  50% {
    stroke: #F7C223;
  }
  75% {
    stroke: #1B9A59;
  }
  100% {
    stroke: #4285F4;
  }
}
@keyframes dash {
  0% {
    stroke-dashoffset: 187;
  }
  50% {
    stroke-dashoffset: 46.75;
    transform: rotate(135deg);
  }
  100% {
    stroke-dashoffset: 187;
    transform: rotate(450deg);
  }
}

.spin{
margin: auto;

   width: 100%;
     display: flex;
   align-items: center;
   justify-content: center;
}

	</style>







</head>
<body>
<div class="scroller" id="scroll"></div>
<div class="spin"><svg class="spinner" width="65px" height="65px" viewBox="0 0 66 66" xmlns="http://www.w3.org/2000/svg">\
   <circle class="path" fill="none" stroke-width="6" stroke-linecap="round" cx="33" cy="33" r="30"></circle>\
</svg></div>
<div class="container showData" id="showdata"></div>

<script   src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
  <script  src="js/fetch.min.js" type="text/javascript"></script>

<script type="text/javascript">
	function loadPlayer(element){
		element.setAttribute('onclick','')
 var video = element.querySelector('video')

    var url = element.getAttribute('url')
if(Hls.isSupported()) {
    console.log(url)
    var hls = new Hls();
    hls.attachMedia(video);
    hls.on(Hls.Events.MANIFEST_PARSED,function() {
      video.play();


  });

var loadMedia = new XMLHttpRequest();
loadMedia.addEventListener("readystatechange", function () {
  if (this.readyState === 4) {
hls.loadSource(JSON.parse(this.responseText).playURL)
element.querySelector('.overlay').style.display = 'none';
element.querySelector('.mediacontent').style.display = 'none';
  }
});
loadMedia.open("GET", url);
loadMedia.send(data)

 }

element.querySelector('.overlay-btn').outerHTML = '<svg class="spinner overlay-btn zoom-btn" style="margin:auto;display: block;" width="65px" height="65px" viewBox="0 0 66 66" xmlns="http://www.w3.org/2000/svg">\
   <circle class="path" fill="none" stroke-width="6" stroke-linecap="round" cx="33" cy="33" r="30"></circle>\
</svg>'
	}
	var externalToApi = 'https://api.fox.com/fbc-content/v3/video?externalId=853172291669'
var shows = 'https://api.fox.com/fbc-content/v3/screens/find'
var newest = 'https://api.fox.com/fbc-content/v3/screenpanels/58d57fd0880f910001a9fb82/items' 
var data = null;
function loadInfo(thing){
document.getElementById('showdata').innerHTML = ''
document.getElementsByClassName('spin')[0].style.display = 'flex'
	console.log('https://api.fox.com/fbc-content/v3/screens/series-detail/'+thing.id)
var loadShow = new XMLHttpRequest();
loadShow.addEventListener("readystatechange", function () {
  if (this.readyState === 4) {
    var showinfo = (JSON.parse(this.responseText));
console.log(showinfo)
var season = showinfo.panels.member[1].items.member["0"].episodes["@id"]
console.log(season)
var seasoninfo = new XMLHttpRequest();
seasoninfo.addEventListener("readystatechange",function () {
  if (this.readyState === 4) {
var json = (JSON.parse(this.responseText))
document.getElementById('showdata').innerHTML += '<img style="    margin: 0px auto 30px;max-width: 400px;    width: 100%;display: block;" width="100%" src="'+json.member[0].images.logoCenter.FHD+'">'
for(i in json.member){
if(!json.member[i].requiresAuth && json.member[i].isFullEpisode ){

document.getElementById('showdata').innerHTML += '<div class="card">\
		<div class="sixteen-nine top" url="'+json.member[i].videoRelease.url+'" onclick="loadPlayer(this)">\
		<video class="sixteen-nine" style="top:0px;position: absolute;" playsinline  loop controls width="100%" height="100%"></video>\
			<img class="mediacontent" width="100%" src="'+json.member[i].images.still.HD+'">\
			<div class="overlay"><a   href="javascript:" class="overlay-btn zoom-btn"><i class="fa fa-play playbutton" style="visibility: visible;"></i></a></div>\
		</div>\
		<div class="content">\
			<h1>'+json.member[i].headline+'</h1>\
			<p>'+json.member[i].description+'</p>\
</div>\
\</div>'


var old = '<li><a href="'+json.member[i].videoRelease.url+'"><img  width="100%" src="'+json.member[i].images.still.HD+'"><span>'+json.member[i].headline+'</span></a></li>'
console.log(json.member[i].images)
console.log(json.member[i].videoRelease.url)
console.log(json.member[i].headline)
console.log(json.member[i].description)
console.log(json.member[i].originalAirDate)
console.log(json.member[i].durationInSeconds)
}



}
    document.getElementsByClassName('spin')[0].style.display = 'none'

}

}) 
seasoninfo.open("GET",season);
seasoninfo.setRequestHeader("apikey", "rm7dzFLzucfbXAVkZi8e1P34PWEN4GoR");

seasoninfo.send(null)




  }
});
loadShow.open("GET", 'https://api.fox.com/fbc-content/v3/screens/series-detail/'+thing.id);

loadShow.setRequestHeader("apikey", "rm7dzFLzucfbXAVkZi8e1P34PWEN4GoR");
loadShow.send(data)

}

var xhr = new XMLHttpRequest();

xhr.addEventListener("readystatechange", function () {
  if (this.readyState === 4) {
    var foxshows = (JSON.parse(this.responseText).panels.member[3].items.member);
    for (var i = foxshows.length - 1; i >= 0; i--) {
    	document.getElementById('scroll').innerHTML += '\
<div onclick="loadInfo(this)" id="'+foxshows[i].id+'" class="show"><img width="100%" src="'+foxshows[i].images.seriesList.FHD+'"></div>   	'
    	console.log(foxshows[i])
    	console.log(foxshows[i].images.seriesList.HD)
    }
    document.getElementsByClassName('spin')[0].style.display = 'none'

  }
});


xhr.open("GET", "https://api.fox.com/fbc-content/v3/screens/find");

xhr.setRequestHeader("apikey", "rm7dzFLzucfbXAVkZi8e1P34PWEN4GoR");


xhr.send(data);
</script>
</body>
</html>