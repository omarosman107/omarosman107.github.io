
<!DOCTYPE html><html class=''>
<head>

   <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
            <link async href="css/feed.css" rel="stylesheet">
                  <link async href="css/font-awesome.min.css" rel="stylesheet">
                  <style type="text/css">





                  	body {
background-color: #F4F4F4;
}

.showbox {
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
  padding: 5%;
}

.loader {
  position: relative;
  margin: 0 auto;
  width: 100px;
}
.loader:before {
  content: '';
  display: block;
  padding-top: 100%;
}

.circular {
  animation: rotate 2s linear infinite;
  height: 100%;
  transform-origin: center center;
  width: 100%;
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
  margin: auto;
}

.path {
  stroke-dasharray: 1, 200;
  stroke-dashoffset: 0;
  animation: dash 1.5s ease-in-out infinite, color 6s ease-in-out infinite;
  stroke-linecap: round;
}

@keyframes rotate {
  100% {
    transform: rotate(360deg);
  }
}
@keyframes dash {
  0% {
    stroke-dasharray: 1, 200;
    stroke-dashoffset: 0;
  }
  50% {
    stroke-dasharray: 89, 200;
    stroke-dashoffset: -35px;
  }
  100% {
    stroke-dasharray: 89, 200;
    stroke-dashoffset: -124px;
  }
}
@keyframes color {
  100%,
  0% {
    stroke: #d62d20;
  }
  40% {
    stroke: #0057e7;
  }
  66% {
    stroke: #008744;
  }
  80%,
  90% {
    stroke: #ffa700;
  }
}

                  </style>

 
</head>
<body>
<div class="contain">
<h1>EPISODES</h1>
<p>Made By <a href="https://twitter.com/itsMangoPlays">@itsMangoPlays </a></p>
  <h1 style="text-align:center;font-size:xx-large">FOX,CW  Episodes</h1>

  <input type="text" name="" id="search" oninput="search(this.value)">

<div class="loaderHolder">
  <div id="fox" class="showbox">
  <div class="loader">
    <svg class="circular" viewBox="25 25 50 50">
      <circle class="path" cx="50" cy="50" r="20" fill="none" stroke-width="2" stroke-miterlimit="10"/>
    </svg>
  </div>
</div>
  <div id="cw" class="showbox">
  <div class="loader">
    <svg class="circular" viewBox="25 25 50 50"> 
      <circle class="path" cx="50" cy="50" r="20" fill="none" stroke-width="2" stroke-miterlimit="10"/>
    </svg>
  </div>
</div>
</div>



   <ul id="carasoul" class="fanarts-list list-unstyled list-inline">
</ul>
   </div>

   <script type="text/javascript" src="js/fetch.min.js"></script>



<script>

function addJS(url) {
   var s = document.createElement('script'); // Create a script element
   s.type = "text/javascript"; // optional in html5
   s.async = true; // asynchronous? true/false
   s.src = url;
   var fs = document.getElementsByTagName('script')[0]; // Get the first script
   fs.parentNode.insertBefore(s, fs);
};



function search(val){
function filter(a)
{
    var match = []

    for (var i = 0; i < a.length; i++)
    {
        if ( a[i].metadata.toLowerCase().includes(val.toLowerCase()) ) match.push(a[i])
    }

    return match
}

var result = filter(obj);

if (result.length == 0) {
document.getElementById('carasoul').innerHTML = "No results found :("
console.log(result.length)
	}else{
	loadMedia(result)
}
console.log(result.length)
lazyLoadImages();

	

}
var theflash = 'http://images.cwtv.com/feed/mobileapp/videos/apiversion_7/show_the-flash'
var show_hub = 'http://images.cwtv.com/feed/mobileapp/videos/apiversion_7/show_hub'
var shows = 'http://images.cwtv.com/feed/mobileapp/shows/apiversion_7/channel_cwtv/pagesize_100'
var proxy = 'https://cors-anywhere.herokuapp.com/'
var template = "";
if (!window.fetch) {
	alert('fetch isnt working')
}
function formatDate(date) {
    var d = new Date(date),
        month = '' + (d.getMonth() + 1),
        day = '' + d.getDate(),
        year = d.getFullYear();

    if (month.length < 2) month = '0' + month;
    if (day.length < 2) day = '0' + day;

    return [year, month, day].join('-');
}
// url (required), options (optional)
function fmtMSS(s){return(s-(s%=60))/60+(9<s?':':':0')+Math.trunc(s)}
function rating(rate){
if (rate.includes('tv-14')) {
	return "TV-14"
}
	if (rate.includes('tv-pg')) {
		return "TV-PG"
	}

	if (rate.includes('tv-y7')) {
		return "TV-Y7"
	}


	if(rate.includes('tv-y')){
		return "TV-Y"
	}

	if(rate.includes('tv-g')){
		return "TV-G"
	}

}
function isElementInViewport (el) {

    var rect = el.getBoundingClientRect();

    return (
        rect.top >= 0 &&
        rect.left >= 0 &&
        rect.bottom <= (window.innerHeight || document.documentElement.clientHeight) && /*or $(window).height() */
        rect.right <= (window.innerWidth || document.documentElement.clientWidth) /*or $(window).width() */
    );
}
//these handlers will be removed once the images have loaded
window.addEventListener("DOMContentLoaded", lazyLoadImages);
window.addEventListener("load", lazyLoadImages);
window.addEventListener("resize", lazyLoadImages);
window.addEventListener("scroll", lazyLoadImages);

function lazyLoadImages() {
  var images = document.querySelectorAll("img[data-src]"),
      item;
  // load images that have entered the viewport
  [].forEach.call(images, function (item) {
    if (isElementInViewport(item)) {
      item.setAttribute("src",item.getAttribute("data-src"));
      item.removeAttribute("data-src")
    }
  })
  // if all the images are loaded, stop calling the handler
  if (images.length == 0) {
    window.removeEventListener("DOMContentLoaded", lazyLoadImages);
    window.removeEventListener("load", lazyLoadImages);
    window.removeEventListener("resize", lazyLoadImages);
    window.removeEventListener("scroll", lazyLoadImages);
  }
}

 

window.addEventListener('scroll', function(evt) {

lazyLoadImages();

});


function loadMedia(json){
json = json.sort(function(a, b) {
    a = new Date(a.airdate);
    b = new Date(b.airdate);
    return a>b ? -1 : a<b ? 1 : 0;
})
	template = ''
 for(i in json){
  
  template = template + '<li class=initialized ><div class="piece fanart-container"><div class=image-crop><a href="'+json[i].href+'"><img alt="'+json[i].show+'" data-src="'+json[i].img+'" class"lazy" ></a><div class="overlay"><a href="player.html?'+json[i].href+'" class="overlay-btn zoom-btn " title="Watch"><i class="fa fa-play"></i></a></div></div><div class="episode-details fanart-details"><h2><a href="player.html?'+json[i].href+'">'+json[i].episode+'</a></h2><a href="player.html?'+json[i].href+'" class=secondary-link>'+json[i].show +'</a><div class=more-infos></div><p>'+json[i].airdate+' | ' + json[i].rating + ' | '+json[i].length +' | '+json[i].epiformat+'</div></div>'
      document.getElementById('carasoul').innerHTML = template;
 

 }

      template = '';




}



function epiformat(s,e){

	if (s < 10) {
s = '0' + s
	}
		if (e < 10) {
e = '0' + e
	}

	return 'S' + s + 'E' + e
}
function toTitleCase(str)
{
    return str.replace(/\w\S*/g, function(txt){return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();});
} 

 function msToTime(duration) {
        var milliseconds = parseInt((duration%1000)/100)
            , seconds = parseInt((duration/1000)%60)
            , minutes = parseInt((duration/(1000*60))%60)
            , hours = parseInt((duration/(1000*60*60))%24);

        hours = (hours < 10) ? "0" + hours : hours;
        minutes = (minutes < 10) ? "0" + minutes : minutes;
        seconds = (seconds < 10) ? "0" + seconds : seconds;

        return  minutes + ":" + seconds ;
    }
var template = "";



	          var obj = []





fetch(proxy + show_hub, {
    method: 'get'
}).then(function(response) {
    return response.json();
}).then(function(data){
var start = new Date()

 for(i in data.videos){
   if(data.videos[i].fullep == 1){
     function millisToMinutesAndSeconds(millis) {
  var minutes = Math.floor(millis / 60000 * 60);
  var seconds = ((millis % 60000) / 1000).toFixed(0);
  return minutes;
}

var epinum = data.videos[i].episode
try{
epinum = data.videos[i].availability_asset_id.split('-')[data.videos[i].availability_asset_id.split('-').length - 1]

}catch(e){
console.log(e)
}



  obj.push({img:data.videos[i].large_thumbnail,
  	rating:(data.videos[i].rating),
  	href: data.videos[i].share_url,
  	airdate:data.videos[i].airdate,
  	show:data.videos[i].series_name,
  	episode:data.videos[i].title,
  	epiformat:epinum,
  	length:data.videos[i].duration,
  	metadata:data.videos[i].rating + data.videos[i].airdate + data.videos[i].series_name + data.videos[i].title + epinum + data.videos[i].duration
  })




     

   }
   }
      loadMedia(obj)
      lazyLoadImages();

document.getElementById('cw').style.display = "none"
   template = ''
   var end = new Date()

   console.log(end.getTime() - start.getTime())


}).catch(function(err) {
console.log(err.message)
});











function fox(range){
fetch('https://feed.theplatform.com/f/fox-mobile/fullepisodes?count=true&form=json&byCustomValue={requiresAuth}{false}&range=' + range, {
	method: 'get'
}).then(function(response) {
	return response.json();
}).then(function(data){
	console.log(data)
for(i in data.entries){
var date = new Date(data.entries[i].media$availableDate)
console.log(data.entries[i].media$thumbnails)
var image = data.entries[i].media$thumbnails[5].plfile$url
if (image.includes('http://')) {
	image = image.replace('http','https')
} 

  obj.push({img:image,
  	rating:rating(data.entries[i].media$ratings[0].rating),
  	href: data.entries[i].media$content[0].plfile$url,
  	airdate:formatDate(data.entries[i].media$availableDate),
  	show:data.entries[i].fox$series,
  	episode:data.entries[i].title,
  	epiformat:epiformat(data.entries[i].fox$season,data.entries[i].fox$episode),
  	length:fmtMSS(data.entries[i].media$content[0].plfile$duration),
  	metadata:rating(data.entries[i].media$ratings[0].rating) + formatDate(data.entries[i].media$availableDate) + data.entries[i].fox$series + data.entries[i].title + epiformat(data.entries[i].fox$season,data.entries[i].fox$episode) + fmtMSS(data.entries[i].media$content[0].plfile$duration)
  })




   }
   document.getElementById('fox').style.display = "none"
         loadMedia(obj)
lazyLoadImages();

   console.log(obj)

}).catch(function(err) {
console.log(err)
});
}

function procABC(showepi){

for(a in showepi.videos.video){
 var thumb 

	try{

			if (showepi.videos.video[a].hasOwnProperty('thumbnails')) {
			
thumb = showepi.videos.video[a].thumbnails.thumbnail[0].$		}


	 	 	var airdate = formatDate(showepi.videos.video[a].airdates.airdate)



	}catch(e){
console.log(e)
	}
  obj.push({img:thumb,
  	rating:(showepi.videos.video[a].tvrating.rating),
  	href: "abc.go.com/vidcode=" + showepi.videos.video[a]['@id'],
  	airdate:airdate,
  	show:showepi.videos.video[a].show.title,
  	episode:showepi.videos.video[a].title,
  	epiformat:epiformat(showepi.videos.video[a].season.trackcode.generic.cseason,showepi.videos.video[a].number),
  	length:msToTime(showepi.videos.video[a].duration['$']),
  	 metadata:(showepi.videos.video[a].tvrating.rating) + airdate + showepi.videos.video[a].show.title + showepi.videos.video[a].show.title + epiformat(showepi.videos.video[a].season.trackcode.generic.cseason,showepi.videos.video[a].number) + msToTime(showepi.videos.video[a].duration['$'])
});

}
           loadMedia(obj)
           lazyLoadImages();


}



function useABC(json){
console.log(json)

for(i in json.shows.show){
addJS('https://api.watchabc.go.com/vp2/ws/s/contents/2020/videos/jsonp/001/001/-1/'+json.shows.show[i]['@id']+'/-1/-1/-1/-1?callback=procABC')

}





         loadMedia(obj)

}


// addJS('https://api.watchabc.go.com/vp2/ws/s/contents/2020/shows/jsonp/001/001/-1?callback=useABC')








fetch('https://feed.theplatform.com/f/OyMl-B/8IyhuVgUXDd_?count=true&form=json&range=0-40', {
	method: 'get'
}).then(function(response) {
	return response.json();
}).then(function(data){
	console.log(data.entries)
for(i in data.entries){
	console.log(data.entries[i].media$ratings)
  obj.push({img:data.entries[i].videoStillURL,
  	rating:rating(data.entries[i].media$ratings[0]),
  	href: data.entries[i].videoURL,
  	airdate:data.entries[i].airdate,
  	show:data.entries[i].nbcu$show,
  	episode:data.entries[i].name,
  	epiformat:epiformat(data.entries[i].season,data.entries[i].episode),
  	length:"--:--",
  	metadata:rating(data.entries[i].media$ratings[0].rating) + data.entries[i].airdate + data.entries[i].nbcu$show + data.entries[i].name + epiformat(data.entries[i].season,data.entries[i].episode) + fmtMSS(data.entries[i].length)
  })




   }
         loadMedia(obj)

   console.log(obj)

}).catch(function(err) {
console.log(err)
});











   fox('0-25')


</script>
</body></html>