
<!DOCTYPE html><html class=''>
<head>
<!--
<script src="https://www.gstatic.com/firebasejs/4.0.0/firebase.js"></script>
<script type="text/javascript">
   // Initialize Firebase
  // TODO: Replace with your project's customized code snippet
  var config = {
    apiKey: " AIzaSyC5rQaFbnCg0eI-7BavdI_CGHPPuQFhuis",
    authDomain: " tv-stream-5f331.firebaseapp.com",
    databaseURL: "https://tv-stream-5f331.firebaseio.com"
     };
  firebase.initializeApp(config);

</script>
-->
<link rel="dns-prefetch" href="https://images1-focus-opensocial.googleusercontent.com">

<meta name="viewport" content="width=device-width, initial-scale=1">

  
 <!-- Compiled and minified CSS -->

  <!-- Compiled and minified JavaScript -->

<style type="text/css">
h1 {
    margin: 20px 0 10px;
    font-size: 36px;
}
h1, h2 {
    font-weight: 500;
    line-height: 1.1;
    color: inherit;
    padding: 13px;
    color: white;
}
* {
     color: white;
}

  body {
         overflow-x: hidden;
    font-size: 16px;
    line-height: 1.428571429;
    margin: 0;
    padding: 0 0 1px;
    background: #111111;
    font-family: ProximaNova,"Helvetica Neue",Helvetica,Arial,sans-serif;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }
  .logo {
    width: 75px;
    margin: auto
}
.container-1 {
    width: 100%;
    vertical-align: middle;
    white-space: nowrap;
    position: relative
}

.container-1 input#search {
    width: 100%;
    height: 50px;
    background: #2b303b;
    border: 0;
    font-size: 16px;
    float: left;
    color: #262626;
    padding-left: 45px;
    border-radius: 1000px;
    -webkit-transition: all .55s ease;
    transition: all .55s ease
}

.container-1 input#search::-webkit-input-placeholder {
    color: #65737e
}

.container-1 input#search:-moz-placeholder,.container-1 input#search::-moz-placeholder {
    color: #65737e
}

.container-1 input#search:-ms-input-placeholder {
    color: #65737e
}

.nextContainer {
    margin-bottom: 80px
}

.container-1 .icon {
    position: absolute;
    top: 50%;
    margin-left: 17px;
    margin-top: 14px;
    z-index: 1;
    color: #4f5b66
}

.btn-floating {
    color: #777
}

.container-1 input#search:active,.container-1 input#search:focus {
    outline: 0;
    background: #fff
}
@media (min-width:500px) {
    .box {
        width: 650px
    }
}

@media (max-width:700px) {
    .tvshow {
        width: 22vw;
    }

}
.box {
    height: 50px;
    margin: 61px auto;
    padding-left: 10px;
    padding-right: 10px
}
.spinner {
    -webkit-animation: rotator 1.4s linear infinite;
    animation: rotator 1.4s linear infinite
}

@-webkit-keyframes rotator {
    0% {
        -webkit-transform: rotate(0deg);
        transform: rotate(0deg)
    }

    to {
        -webkit-transform: rotate(270deg);
        transform: rotate(270deg)
    }
}

@keyframes rotator {
    0% {
        -webkit-transform: rotate(0deg);
        transform: rotate(0deg)
    }

    to {
        -webkit-transform: rotate(270deg);
        transform: rotate(270deg)
    }
}

@-webkit-keyframes colors {
    0%,25%,50%,75%,to {
        stroke: #fff
    }
}

@keyframes colors {
    0%,25%,50%,75%,to {
        stroke: #fff
    }
}

@-webkit-keyframes dash {
    0% {
        stroke-dashoffset: 187
    }

    50% {
        stroke-dashoffset: 46.75;
        -webkit-transform: rotate(135deg);
        transform: rotate(135deg)
    }

    to {
        stroke-dashoffset: 187;
        -webkit-transform: rotate(450deg);
        transform: rotate(450deg)
    }
}

@keyframes dash {
    0% {
        stroke-dashoffset: 187
    }

    50% {
        stroke-dashoffset: 46.75;
        -webkit-transform: rotate(135deg);
        transform: rotate(135deg)
    }

    to {
        stroke-dashoffset: 187;
        -webkit-transform: rotate(450deg);
        transform: rotate(450deg)
    }
}

</style>

<title>EPISODES - We provide the best streaming site.</title> 
</head>
<body>
<div class="contain">
<p style="    padding-top: 20px;
    padding-left: 25px;">Made By <a href="https://twitter.com/itsMangoPlays">@itsMangoPlays </a></p>
  <a href="#" onclick="query('')"><h1 style="text-align:center;font-size:xx-large;padding-top: 100px;">EPISODES</h1></a>
<div id="loaderHolder" class="loaderHolder"></div>

<button onclick="topFunction()" id="myBtn" title="Go to top"><i class="fa fa-level-up" aria-hidden="true"></i>
</button>

<div class="box">
  <div class="container-1">
      <span class="icon"><i class="fa fa-search"></i></span>
      <input oninput="query(this.value)"  type="search" id="search" placeholder="Search..." />
  </div>
  <span id="results"></span>
</div>

<h1>CONTINUE WATCHING</h1>

<div   onscroll="lazyLoadImages()" class=" fanarts-list list-unstyled list-inline shows" id="watching">

</div>
<h1>SHOWS</h1>
<div onscroll="lazyLoadImages()" class="shows dragscroll" id="tvShows">
  

</div>
<div style="display: none;" class="nextContainer">
    <a id="left-buttontv"  class="btn-floating btn-large waves-effect waves-light red" value="left"><i class="material-icons">chevron_left</i></a>

    <a id="right-buttontv" class="btn-floating btn-large waves-effect waves-light red"  style="float: right;" value="right"><i class="material-icons">chevron_right</i></a>
  
</div>







   <ul id="carasoul" class="fanarts-list list-unstyled list-inline">
</ul>
<div class="header">
<hr>
<div class="logo ">

<svg version="1.0" xmlns="http://www.w3.org/2000/svg"
 width="100%" viewBox="0 0 800.000000 800.000000"
 preserveAspectRatio="xMidYMid meet">
<metadata>
Created by potrace 1.13, written by Peter Selinger 2001-2015
</metadata>
<g transform="translate(0.000000,800.000000) scale(0.100000,-0.100000)"
fill="#ffffff" stroke="none">
<path d="M230 4980 l0 -1040 1191 0 1191 0 -4 -187 c-3 -182 -4 -190 -32 -251
-52 -112 -148 -177 -298 -202 -40 -6 -429 -10 -1055 -10 l-993 0 0 -485 0
-486 1238 4 c906 3 1258 7 1317 16 288 44 485 109 636 212 224 151 335 356
360 659 6 78 9 624 7 1465 l-3 1340 -587 3 -588 2 0 -550 0 -550 -605 0 -605
0 0 550 0 550 -585 0 -585 0 0 -1040z"/>
<path d="M4220 5530 l0 -490 590 0 590 0 0 -1630 0 -1630 590 0 590 0 0 1630
0 1630 595 0 595 0 0 490 0 490 -1775 0 -1775 0 0 -490z"/>
</g>
</svg>



</div>
<a href="log.txt"><span>Changelog</span></a>
</div>
   </div>
        <script async type="text/javascript" src="https://cdn.rawgit.com/asvd/dragscroll/master/dragscroll.js"></script>


 <!-- <link async rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
   <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<-->
<script>


function addJS(url) {
   var s = document.createElement('script'); // Create a script element
   s.type = "text/javascript"; // optional in html5
   s.async = true; // asynchronous? true/false
   s.src = url;
   var fs = document.getElementsByTagName('script')[0]; // Get the first script
   fs.parentNode.insertBefore(s, fs);
};


 

if (window.fetch) {}else{

  addJS('js/fetch.min.js');
}

 // https://github.com/filamentgroup/loadCSS
    !function(e){"use strict"
    var n=function(n,t,o){function i(e){return f.body?e():void setTimeout(function(){i(e)})}var d,r,a,l,f=e.document,s=f.createElement("link"),u=o||"all"
    return t?d=t:(r=(f.body||f.getElementsByTagName("head")[0]).childNodes,d=r[r.length-1]),a=f.styleSheets,s.rel="stylesheet",s.href=n,s.media="only x",i(function(){d.parentNode.insertBefore(s,t?d:d.nextSibling)}),l=function(e){for(var n=s.href,t=a.length;t--;)if(a[t].href===n)return e()
    setTimeout(function(){l(e)})},s.addEventListener&&s.addEventListener("load",function(){this.media=u}),s.onloadcssdefined=l,l(function(){s.media!==u&&(s.media=u)}),s}
    "undefined"!=typeof exports?exports.loadCSS=n:e.loadCSS=n}("undefined"!=typeof global?global:this)



var stylesheet = loadCSS( "css/feed.css" );






function logIn(u,p){
  firebase.auth().signInWithEmailAndPassword(u,p).catch(function(error) {
  // Handle Errors here.
  var errorCode = error.code;
  var errorMessage = error.message;
console.log(error)
  // ...
});
firebase.auth().onAuthStateChanged(firebaseUser => {
if(firebaseUser){
console.log(firebaseUser)
}else{
console.log('not logged in')
}
})
}
window.onscroll = function() {scrollFunction()};

function scrollFunction() {
    if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
        document.getElementById("myBtn").style.display = "block";
    } else {
        document.getElementById("myBtn").style.display = "none";
    }
}

// When the user clicks on the button, scroll to the top of the document
function topFunction() {
    document.body.scrollTop = 0;
    document.documentElement.scrollTop = 0;
}
/*
function is_touch_device() {
  return 'ontouchstart' in window        // works on most browsers 
      || navigator.maxTouchPoints;       // works on IE10/11 and Surface
};
if(is_touch_device){
            $('#left-buttontv').hide()
            $('#right-buttontv').hide()

}
$('#left-buttontv').show()
            $('#right-buttontv').show()
 $(function () {
        var outer = $('#tvShows');

        $('#left-buttontv').click(function () {
           var leftPos = outer.scrollLeft();
           outer.animate({ scrollLeft: leftPos - 900 }, 200);
        });

        $('#right-buttontv').click(function () {
           var leftPos = outer.scrollLeft();
           outer.animate({ scrollLeft: leftPos + 900 }, 200);
        });
     });

*/

function results(num){
  var res = num + " results found"
  if(num == 1){
res = "one result found"
  }
   if(num == 0){
res = "no results found"
  }
     if(num == null){
res = ""
  }
  document.getElementById('results').innerHTML =  res
}
!function(a,b){"function"==typeof define&&define.amd?define([],b):"object"==typeof exports?module.exports=b():a.LazyLoad=b()}(this,function(){function a(){k||(j={elements_selector:"img",container:window,threshold:300,throttle:150,data_src:"original",data_srcset:"original-set",class_loading:"loading",class_loaded:"loaded",skip_invisible:!0,callback_load:null,callback_error:null,callback_set:null,callback_processed:null},k=!0)}function b(a,b,c){function d(){return window.innerWidth||l.documentElement.clientWidth||document.body.clientWidth}function e(){return window.innerHeight||l.documentElement.clientHeight||document.body.clientHeight}function f(a){return a.getBoundingClientRect().top+m-l.documentElement.clientTop}function g(a){return a.getBoundingClientRect().left+n-l.documentElement.clientLeft}function h(){var d;return d=b===window?e()+m:f(b)+b.offsetHeight,d<=f(a)-c}function i(){var e;return e=b===window?d()+window.pageXOffset:g(b)+d(),e<=g(a)-c}function j(){var d;return d=b===window?m:f(b),d>=f(a)+c+a.offsetHeight}function k(){var d;return d=b===window?n:g(b),d>=g(a)+c+a.offsetWidth}var l,m,n;return l=a.ownerDocument,m=window.pageYOffset||l.body.scrollTop,n=window.pageXOffset||l.body.scrollLeft,!(h()||j()||i()||k())}function c(){var a=new Date;return a.getTime()}function d(a,b){var c,d={};for(c in a)a.hasOwnProperty(c)&&(d[c]=a[c]);for(c in b)b.hasOwnProperty(c)&&(d[c]=b[c]);return d}function e(a){return Array.prototype.slice.call(a)}function f(a,b){var c=a.parentElement;if("PICTURE"===c.tagName)for(var d=0;d<c.children.length;d++){var e=c.children[d];if("SOURCE"===e.tagName){var f=e.getAttribute("data-"+b);f&&e.setAttribute("srcset",f)}}}function g(a,b,c){var d=a.tagName,e=a.getAttribute("data-"+c);if("IMG"===d){f(a,b);var g=a.getAttribute("data-"+b);return g&&a.setAttribute("srcset",g),void(e&&a.setAttribute("src",e))}return"IFRAME"===d?void(e&&a.setAttribute("src",e)):void(e&&(a.style.backgroundImage="url("+e+")"))}function h(a,b){return function(){return a.apply(b,arguments)}}function i(b){a(),this._settings=d(j,b),this._queryOriginNode=this._settings.container===window?document:this._settings.container,this._previousLoopTime=0,this._loopTimeout=null,this._handleScrollFn=h(this.handleScroll,this),window.addEventListener("resize",this._handleScrollFn),this.update()}var j,k=!1;return i.prototype._showOnAppear=function(a){function b(){a.removeEventListener("load",c),a.classList.remove(d.class_loading),d.callback_error&&d.callback_error(a)}function c(){null!==d&&(d.callback_load&&d.callback_load(a),a.classList.remove(d.class_loading),a.classList.add(d.class_loaded),a.removeEventListener("load",c),a.removeEventListener("error",b))}var d=this._settings;"IMG"!==a.tagName&&"IFRAME"!==a.tagName||(a.addEventListener("load",c),a.addEventListener("error",b),a.classList.add(d.class_loading)),g(a,d.data_srcset,d.data_src),d.callback_set&&d.callback_set(a)},i.prototype._loopThroughElements=function(){var a,c,d=this._settings,e=this._elements,f=e?e.length:0,g=[];for(a=0;a<f;a++)c=e[a],d.skip_invisible&&null===c.offsetParent||b(c,d.container,d.threshold)&&(this._showOnAppear(c),g.push(a),c.wasProcessed=!0);for(;g.length>0;)e.splice(g.pop(),1),d.callback_processed&&d.callback_processed(e.length);0===f&&this._stopScrollHandler()},i.prototype._purgeElements=function(){var a,b,c=this._elements,d=c.length,e=[];for(a=0;a<d;a++)b=c[a],b.wasProcessed&&e.push(a);for(;e.length>0;)c.splice(e.pop(),1)},i.prototype._startScrollHandler=function(){this._isHandlingScroll||(this._isHandlingScroll=!0,this._settings.container.addEventListener("scroll",this._handleScrollFn))},i.prototype._stopScrollHandler=function(){this._isHandlingScroll&&(this._isHandlingScroll=!1,this._settings.container.removeEventListener("scroll",this._handleScrollFn))},i.prototype.handleScroll=function(){var a,b,d;this._settings&&(b=c(),d=this._settings.throttle,0!==d?(a=d-(b-this._previousLoopTime),a<=0||a>d?(this._loopTimeout&&(clearTimeout(this._loopTimeout),this._loopTimeout=null),this._previousLoopTime=b,this._loopThroughElements()):this._loopTimeout||(this._loopTimeout=setTimeout(h(function(){this._previousLoopTime=c(),this._loopTimeout=null,this._loopThroughElements()},this),a))):this._loopThroughElements())},i.prototype.update=function(){this._elements=e(this._queryOriginNode.querySelectorAll(this._settings.elements_selector)),this._purgeElements(),this._loopThroughElements(),this._startScrollHandler()},i.prototype.destroy=function(){window.removeEventListener("resize",this._handleScrollFn),this._loopTimeout&&(clearTimeout(this._loopTimeout),this._loopTimeout=null),this._stopScrollHandler(),this._elements=null,this._queryOriginNode=null,this._settings=null},i});

function addJS(url) {
   var s = document.createElement('script'); // Create a script element
   s.type = "text/javascript"; // optional in html5
   s.async = true; // asynchronous? true/false
   s.src = url;
   var fs = document.getElementsByTagName('script')[0]; // Get the first script
   fs.parentNode.insertBefore(s, fs);
};
  document.getElementById('loaderHolder').innerHTML += '<svg  class="spinner" width="65px" height="65px" viewBox="0 0 66 66" xmlns="http://www.w3.org/2000/svg"><circle class="path" fill="none" stroke-width="6" stroke-linecap="round" cx="33" cy="33" r="30"></circle></svg>'
var num = 0
function loaders(atr){

  if (atr == 'remove') {
    num = num - 1
    if (num - 1 == -1) {
var child = document.getElementsByClassName('spinner')[0]
    document.getElementById('loaderHolder').removeChild(child)
    }


if (document.getElementsByClassName('spinner').length == 0) {

}
return;
  }


  num++

}
function query(q,obj){
    if (q == null) {
   q = obj.getAttribute('show')
//   document.body.style.background = 'url(' + obj.getAttribute('bg') + ") no-repeat center center fixed";
  };

  document.getElementById('search').value = q

  var num = 0
  for (var i = document.getElementsByClassName('initialized').length - 1; i >= 0; i--) {
    if( document.getElementsByClassName('initialized')[i].getAttribute('data-query').includes(q.toLowerCase())){
      document.getElementsByClassName('initialized')[i].style.display = "inline-block"
                  document.getElementsByClassName('initialized')[i].style.opacity = "1"

      num += 1
        lazyLoadImages();


    }else{
            document.getElementsByClassName('initialized')[i].style.opacity = "0"


          document.getElementsByClassName('initialized')[i].style.display = "none"

    }


  }


  results(num )
  lazyLoadImages();


} 

    


function showQuery(q,obj){
    if (q == null) {
   q = obj.getAttribute('show')
//   document.body.style.background = 'url(' + obj.getAttribute('bg') + ") no-repeat center center fixed";
  };

  document.getElementById('search').value = q

  var num = 0
  for (var i = document.getElementsByClassName('initialized').length - 1; i >= 0; i--) {
    if( document.getElementsByClassName('initialized')[i].getAttribute('ShowName').includes(q)){
      document.getElementsByClassName('initialized')[i].style.display = "inline-block"
      num += 1
        lazyLoadImages();


    }else{
      document.getElementsByClassName('initialized')[i].style.display = "none"
    }


  }


  results(num )
  lazyLoadImages();


} 

    



var tvobj = {}


function YQLQuery(query, callback) {
    this.query = query;
    this.callback = callback || function(){};
    this.fetch = function() {

        if (!this.query || !this.callback) {
            throw new Error('YQLQuery.fetch(): Parameters may be undefined');
        }

        var scriptEl = document.createElement('script'),
            uid = 'yql' + +new Date(),
            encodedQuery = encodeURIComponent(this.query.toLowerCase()),
            instance = this;

        YQLQuery[uid] = function(json) {
            instance.callback(json);
            delete YQLQuery[uid];
            document.body.removeChild(scriptEl);
        };

        scriptEl.src = 'http://query.yahooapis.com/v1/public/yql?q='
                     + encodedQuery + '&format=json&callback=YQLQuery.' + uid; 
        document.body.appendChild(scriptEl);

    };
}

function tvstQ(q){
  q = encodeURIComponent(q);
 var query = 'https://query.yahooapis.com/v1/public/yql?q=' + encodeURIComponent('select all_images.poster from json where url="https://api.tozelabs.com/v2/show?limit=1&q=' +q + '"') + '&format=json&_maxage=360000';


return query;
}
function yqltheTVDB(q){
  q = encodeURIComponent(q);
 var query = 'https://query.yahooapis.com/v1/public/yql?q=' + encodeURIComponent('select * from json where url="http://skyhook.sonarr.tv/v1/tvdb/search/en/?term=' +q + '"') + '&format=json&_maxage=36000';


return query;
}
function multiURL(urls){
  q = encodeURIComponent(urls);
  var query = "select all_images.poster,stripped_name from json where url='https://api.tozelabs.com/v2/show?limit=1&q=" +q + "';"
  return query;
}
var tvdbimg = 'https://thetvdb.com/banners/posters/279121-50.jpg'

function tvlist(showName){
if (showName in tvobj) {
  return 'Already In.';
}

  var finalList = ''
/*  for(i in showName){

    finalList += multiURL(showName[i])
  }
  showName = 
finalList = ('select * from yql.query.multi where queries="'+finalList + '"')

  var url = 'https://query.yahooapis.com/v1/public/yql?q=' + encodeURIComponent(finalList) +  '&format=json&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys&callback=';
*/
  tvobj[(showName)] = ''

  url = tvstQ(showName)
fetch(url , {
    method: 'get',
    cache: "force-cache"

}).then(function(response) {
  return response.json();
}).then(function(dat){
/*  for (var i = dat.query.results.results.length - 1; i >= 0; i--) {
    try{
    document.getElementById('tvShows').innerHTML += '<div tabindex="1" class="tvshow">  <a href="javascript:"  title="'+dat.query.results.results[i].json.stripped_name+'" bg="" show="' + dat.query.results.results[i].json.stripped_name +'" onclick="query(null,this)" ><img width="100%" alt="'+dat.query.results.results[i].json.stripped_name+'" src="'+dat.query.results.results[i].json.all_images.poster._[3]+'"></a></div>'
}catch(e){
  console.log(e)
}

  }
  */

  document.getElementById('tvShows').innerHTML += '<div tabindex="1" class="tvshow js-tilt" data-tilt>  <a href="javascript:"  title="'+showName+'" bg="" show="' + showName +'" onclick="showQuery(null,this)" ><img width="100%" alt="'+showName+'" src="'+dat.query.results.json.all_images.poster._[4]+'"></a></div>'






}).catch(function(e){
  console.log(e)
});
}

function search(val){

function filter(a)
{
    var match = []

    for (var i = 0; i < a.length; i++)
    {
        if ( a[i].metadata.toLowerCase().includes(val.toLowerCase()) ) match.push(a[i])
    }

    return match




}

var result = filter(obj);

if (result.length == 0) {
document.getElementById('carasoul').innerHTML = "No results found :("
	}else{
	loadMedia(result)
}
lazyLoadImages();

	

}
function sortCards(){


var p = document.getElementById('carasoul');
Array.prototype.slice.call(p.children)
  .map(function (x) { return p.removeChild(x); })
  .sort(function (x, y) { 

     var date1  = x.getAttribute('aired');
     date1 = new Date(date1);
     var date2  = y.getAttribute('aired');
     date2= new Date(date2);

     return date1 < date2 ? 1 : -1;
})
  .forEach(function (x) { p.appendChild(x); });
}


var theflash = 'http://images.cwtv.com/feed/mobileapp/videos/apiversion_7/show_the-flash'
var show_hub = 'http://images.cwtv.com/feed/mobileapp/videos/apiversion_7/show_hub'
var shows = 'http://images.cwtv.com/feed/mobileapp/shows/apiversion_7/channel_cwtv/pagesize_100'
var proxy = 'https://cors-anywhere.herokuapp.com/'
var template = "";
if (!window.fetch) {
	alert('fetch isnt working')
}
function formatDate(date) {
    var d = new Date(date),
        month = '' + (d.getMonth() + 1),
        day = '' + d.getDate(),
        year = d.getFullYear();

    if (month.length < 2) month = '0' + month;
    if (day.length < 2) day = '0' + day;

    return [year, month, day].join('-');
}
// url (required), options (optional)
function fmtMSS(s){return(s-(s%=60))/60+(9<s?':':':0')+Math.trunc(s)}
function rating(rate){
if (rate.includes('tv-14')) {
	return "TV-14"
}
	if (rate.includes('tv-pg')) {
		return "TV-PG"
	}

	if (rate.includes('tv-y7')) {
		return "TV-Y7"
	}


	if(rate.includes('tv-y')){
		return "TV-Y"
	}

	if(rate.includes('tv-g')){
		return "TV-G"
	}

}
var myLazyLoad = new LazyLoad({
    threshold: 100, 
    });


function lazyLoadImages() {
myLazyLoad.update()
}

function loadPlayer(url){
  link = url.href
  window.location = url.href;
  return ; 
$("#myModal").modal()

if (link.includes('cwtv')) {

  // url (required), options (optional)
fetch('http://metaframe.digitalsmiths.tv/v2/CWtv/assets/'+link.split('=')[1]+'/partner/206?format=json', {
  method: 'get'
}).then(function(response) {
  return response.json();
}).then(function(data){
  url = data.videos.variantplaylist.uri
 jwplayer("vplayer").setup({
      file:url,
 });


}).catch(function(err) {
alert('something bad happened :(')});
}
if (link.includes('theplatform')) {
 jwplayer("vplayer").setup({
      file:link.split('?')[1].split('?')[0] + "?mbr=true&manifest=m3u&metafile=false",
      type: "hls"
 });


}
  return false;
}

/*

    $('#tvShows').scroll( function() {
        var $width = $('#tvShows').outerWidth()
        var $scrollWidth = $('#tvShows')[0].scrollWidth; 
        var $scrollLeft = $('#tvShows').scrollLeft();
            $('#right-buttontv').css({opacity: 100})

        if ($scrollWidth - $width === $scrollLeft){
            console.log('right end');
            $('#right-buttontv').fadeTo('fast',0 )
        }
                        $('#left-buttontv').css({opacity: 100})

        if ($scrollLeft===0){
            console.log('left end');
                        $('#left-buttontv').fadeTo('fast',0 )

        }
    });
    */
function loadQuick(json){
var temp = ''

 function newBanner(){
  var date1 = new Date();    
    var date2 = new Date(json.airdate);
    //Customise date2 for your required future time
    
    var diff = (date2 - date1)/1000;
    var diff = Math.abs(Math.floor(diff));
    
    var days = Math.floor(diff/(24*60*60));
    var leftSec = diff - days * 24*60*60;
    
    var hrs = Math.floor(leftSec/(60*60));
    var leftSec = leftSec - hrs * 60*60;
      
    var min = Math.floor(leftSec/(60));
    var leftSec = leftSec - min * 60;


  if (days <= 1 ) {
    return '<div class="new-label"> New</div>'
  }else{
  return ''
}
 } 

 var perc = 0;
  if(localStorage["?"+json.href] ){
    perc = localStorage["?" + json.href + "_perc"]
if(perc == "NaN"){
  perc = 0
}


if(perc == undefined){
  perc = 0
}
  }  function showCheck(){
if(parseInt(perc) > 99){
return 1; 
 }
return 0;
  }
  if (!perc == 0) {


if (document.getElementsByClassName(json.href).length == 0) {

   document.getElementById('watching').innerHTML  += '<li style="width: 280px;margin: 11px;" class=" card initialized '+json.href+'"><a href="#"><div class="piece fanart-container"><div class="image-crop">'+newBanner()+'<a onclick="loadPlayer(this)" href="player.html?'+json.href+'"></span><img  src="'+json.img+'" alt="'+json.episode+'" data-original-set="'+json.imgdyn+'" class"lazy" class="loaded" ></a><div id="projpar" class="w3-progress-container" style=""><span class="episode-gradient"></span><div id="progress" class="w3-progressbar" style="width: '+perc+'%;"></div></div><div class="overlay"><a onclick="loadPlayer(this)" href="newplayer.html?'+json.href+'" class="overlay-btn zoom-btn "  title="Watch '+json.episode+'"><i class="fa fa-play playbutton"></i></a></div></div><div class="episode-details fanart-details"><h2><a class="episode-name" onclick="loadPlayer(this)" href="player.html?'+json.href+'">'+json.episode+'</a></h2><a onclick="loadPlayer(this)" href="" class="secondary-link show-name">'+json.show+'</a><a href="javascript:"><i style="    /* opacity: '+showCheck()+'; */color: rgb(127, 218, 99);position: absolute;right: 10px;bottom: 10px;display:none;" class="visited fa fa-check" aria-hidden="true"></i></a></div><div class="bottom"></div></div></a></li>'


}


  }


  var query = (json.metadata+" "+json.episode).toLowerCase();
 timeofPlayback = json.length.split(':')[0] + 'm'
 var img = ''
if (json.imgdyn == '') {
  img = 'data-original="'+json.img+'"'

} 
var formatter = new Intl.DateTimeFormat("en", { month: "short" })

var date = new Date(json.airdate)

var month2 = formatter.format(date);

var FDate = month2 +' ' + date.getUTCDate() +' '+ date.getUTCFullYear()


  document.getElementById('carasoul').innerHTML += '<li  aired="'+json.airdate+'" class="initialized '+json.type+'" data-query="'+query +'"><div  class="piece fanart-container"><div class=image-crop>'+newBanner()+'<a onclick="loadPlayer(this)" href="player.html?'+json.href+'"></span><img alt="'+json.show+'"  '+img+' data-original-set="'+json.imgdyn+'" class"lazy" ></a><div id="projpar" class="w3-progress-container" style=""><span class="episode-gradient"></span><div id="progress" class="w3-progressbar" style="width: '+perc+'%;"></div></div><div class="overlay"><a onclick="loadPlayer(this)" href="newplayer.html?'+json.href+'" class="overlay-btn zoom-btn " title="Watch '+json.episode+'"><i class="fa fa-play playbutton"></i></a></div></div><div class="episode-details fanart-details"><h2 ><a class="episode-name" onclick="loadPlayer(this)" href="newplayer.html?'+json.href+'">'+json.episode+'</a></h2><a onclick="query(null,this)" show="'+json.show+'" href="javascript:" class="secondary-link show-name">'+json.show +'</a><div class=more-infos></div><p>'+FDate+' | ' + json.rating + ' | '+timeofPlayback +' | '+json.epiformat+'</p><i style="opacity:'+showCheck()+';color:rgb(127, 218, 99);"class="visited fa fa-check" aria-hidden="true"></i></div><div class="bottom"><div class="bar"></div><div class="bar"></div><div class="bar"></div></div></div>'
 





 }



function arrayUnique(array) {
    var a = array.concat();
    for(var i=0; i<a.length; ++i) {
        for(var j=i+1; j<a.length; ++j) {
            if(a[i] === a[j])
                a.splice(j--, 1);
        }
    }

    return a;
}







function loadMedia(json){
obj = arrayUnique(obj.concat(json))
json = json.sort(function(a, b) {
    a = new Date(a.airdate);
    b = new Date(b.airdate);
    return a>b ? -1 : a<b ? 1 : 0;
})
var	template = ''
 for(i in json){
 function newBanner(){
  var date1 = new Date();    
    var date2 = new Date(json[i].airdate);
    //Customise date2 for your required future time
    
    var diff = (date2 - date1)/1000;
    var diff = Math.abs(Math.floor(diff));
    
    var days = Math.floor(diff/(24*60*60));
    var leftSec = diff - days * 24*60*60;
    
    var hrs = Math.floor(leftSec/(60*60));
    var leftSec = leftSec - hrs * 60*60;
      
    var min = Math.floor(leftSec/(60));
    var leftSec = leftSec - min * 60;


  if (days <= 1 ) {
    return '<div class="new-label"> New</div>'
  }else{
  return ''
}
 } 

  var perc = 0;
  if(localStorage["?"+json[i].href] ){
    perc = localStorage["?" + json[i].href + "_perc"]
if(perc == "NaN"){
  perc = 0
}
if(perc == undefined){
  perc = 0
}
  }  function showCheck(){
    console.log(perc)
if(perc > 99){
return 1; 
alert('finished')
 }
return 0;
  }


  if (!perc == 0) {
if (document.getElementsByClassName(json[i].href).length == 0) {



 //  document.getElementById('watching').innerHTML += '<div tabindex="1" class="wtc '+json[i].href+'"><a onclick="loadPlayer(this)" href="player.html?'+json[i].href+'" ><img width="100%" src="'+json[i].img+'"><div id="projpar" class="w3-progress-container" style=""><div id="progress" class="w3-progressbar" style="width: '+perc+'%;"></div></div><br> <span>'+json[i].show+'</span></a></div>'


   document.getElementById('watching').innerHTML += '<li style="width: 280px;margin: 11px;" class=" card  '+json[i].href+'"><a href="#"><div style="    height: 280px;" class="piece fanart-container"><div class="image-crop sixteen-nine">'+newBanner()+'<a onclick="loadPlayer(this)" href="newplayer.html?'+json[i].href+'"></span><div class="imageBG"></div><img    class="cover sixteen-nine "   sizes="(min-width: 600px) 25vw, (min-width: 500px) 50vw, 100vw"   alt="'+json[i].episode+'" data-original-set="'+json[i].imgdyn+'" class"" class="cover" ><i class="fa fa-play-circle-o" aria-hidden="true"></i></a><span class="episode-gradient"></span><div id="projpar" class="w3-progress-container" style=""><div id="progress" class="w3-progressbar" style="width: '+perc+'%;"></div></div><div class="overlay"><a onclick="loadPlayer(this)" href="newplayer.html?'+json[i].href+'" class="overlay-btn zoom-btn "  title="Watch '+json[i].episode+'"><i class="fa fa-play playbutton"></i></a></div></div><div class="episode-details fanart-details"><h2><a class="episode-name" onclick="loadPlayer(this)" href="newplayer.html?'+json[i].href+'">'+json[i].episode+'</a></h2><a onclick="showQuery(null,this)"  show="'+json[i].show+'" href="javascript:" class="secondary-link show-name">'+json[i].show+'</a><a href="javascript:"><i style="    /* opacity: '+showCheck()+'; */color: rgb(127, 218, 99);position: absolute;right: 10px;bottom: 10px;display:none;" class="visited fa fa-check" aria-hidden="true"></i></a></div><div class="bottom"></div></div></a></li>'

}



  }


  var query = (json[i].metadata+" "+json[i].episode).toLowerCase();
 timeofPlayback = json[i].length.split(':')[0] + 'm'
 var img = ''
if (json[i].imgdyn == '') {
  img = 'data-original="'+json[i].img+'"'

} 


var formatter = new Intl.DateTimeFormat("en", { month: "short" })

var date = new Date(json[i].airdate)

var month2 = formatter.format(date);

var FDate = month2 +' ' + date.getUTCDate() +' '+ date.getUTCFullYear()





  template = template + '<li  aired="'+json[i].airdate+'"  ShowName="'+json[i].show+'" class="initialized '+json[i].type+'" data-query="'+query +'"><div  class="piece fanart-container"><div class="image-crop sixteen-nine">'+newBanner()+'<a onclick="loadPlayer(this)" href="newplayer.html?'+json[i].href+'"></span><div class="imageBG"></div><img     class="cover sixteen-nine"  sizes="(min-width: 600px) 25vw, (min-width: 500px) 50vw, 100vw" alt="'+json[i].show+'"  '+img+' data-original-set="'+json[i].imgdyn+'" class"lazy1" ><i class="fa fa-play-circle-o" aria-hidden="true"></i></a><span class="episode-gradient"></span><div id="projpar" class="w3-progress-container" style=""><div id="progress" class="w3-progressbar" style="width: '+perc+'%;"></div></div><div class="overlay"><a onclick="loadPlayer(this)" href="newplayer.html?'+json[i].href+'" class="overlay-btn zoom-btn " title="Watch '+json[i].episode+'"><i class="fa fa-play playbutton"></i></a></div></div><div class="episode-details fanart-details"><h2 ><a class="episode-name" onclick="loadPlayer(this)" href="newplayer.html?'+json[i].href+'">'+json[i].episode+'</a></h2><a onclick="showQuery(null,this)" show="'+json[i].show+'" href="javascript:" class="secondary-link show-name">'+json[i].show +'</a><div class=more-infos></div><p>'+FDate+' | ' + json[i].rating + ' | '+timeofPlayback +' | '+json[i].epiformat+'</p><i style="opacity:'+showCheck()+';color:rgb(127, 218, 99);"class="visited fa fa-check" aria-hidden="true"></i></div><div class="bottom"><div class="bar"></div><div class="bar"></div><div class="bar"></div></div></div>'
 

 }

      document.getElementById('carasoul').innerHTML += template;
      template = '';




}



function epiformat(s,e){
s = parseInt(s)
e = parseInt(e)
	if (s < 10) {
s = '0' + s
	}
		if (e < 10) {
e = '0' + e
	}

	return 'S' + s + 'E' + e
}
function toTitleCase(str)
{
    return str.replace(/\w\S*/g, function(txt){return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();});
} 

 function msToTime(duration) {
        var milliseconds = parseInt((duration%1000)/100)
            , seconds = parseInt((duration/1000)%60)
            , minutes = parseInt((duration/(1000*60))%60)
            , hours = parseInt((duration/(1000*60*60))%24);

        hours = (hours < 10) ? "0" + hours : hours;
        minutes = (minutes < 10) ? "0" + minutes : minutes;
        seconds = (seconds < 10) ? "0" + seconds : seconds;

        return  minutes + ":" + seconds ;
    }
var template = "";



	          var obj = []



var cors_show_hub = 'https://crossorigin.me/'  + show_hub

 var show_hub = 'https://query.yahooapis.com/v1/public/yql?q=' + encodeURIComponent('select * from json where url="' + show_hub+ '"') + '&format=json';
loaders()
fetch(  show_hub, {
    method: 'get',
    cache: "no-store"
}).then(function(response) {
    return response.json(); 
}).then(function(data){
  data = data.query.results.json
var start = new Date()
var showsTemp = {}
var finalObj = []
 for(i in data.videos){
   if(data.videos[i].fullep == 1){
if (!showsTemp[data.videos[i].series_name]) {

showsTemp[data.videos[i].series_name] = data.videos[i].series_name

}

     function millisToMinutesAndSeconds(millis) {
  var minutes = Math.floor(millis / 60000 * 60);
  var seconds = ((millis % 60000) / 1000).toFixed(0);
  return minutes;
}

var epinum = data.videos[i].episode
try{
epinum = data.videos[i].availability_asset_id.split('-')[data.videos[i].availability_asset_id.split('-').length - 1]
var s = (data.videos[i].availability_asset_id.split('-')[data.videos[i].availability_asset_id.split('-').length - 1].split('E')[0].split('S')[1])
var e = (data.videos[i].availability_asset_id.split('-')[data.videos[i].availability_asset_id.split('-').length - 1].split('E')[1])
}catch(e){
console.log(e)
}
var dyn =  data.videos[i].large_thumbnail + " 720w  ,"   + data.videos[i].medium_thumbnail + ' 210w'
tvlist(data.videos[i].series_name)
var episode_data = {img:data.videos[i].medium_thumbnail,
    rating:(data.videos[i].rating),
    imgdyn:dyn,
    href: data.videos[i].share_url,
    airdate:data.videos[i].airdate,
    show:data.videos[i].series_name,
    episode:data.videos[i].title,
    epiformat:epiformat(s,e),
    length:data.videos[i].duration,
    metadata:data.videos[i].rating + data.videos[i].airdate + data.videos[i].series_name + data.videos[i].title + epinum + data.videos[i].duration,
    type:"cw"
  }

  finalObj.push(episode_data)




     

   }
   }
   console.log(finalObj)
   loadMedia(finalObj)
      lazyLoadImages();
      sortCards()

loaders('remove'); 
  template = ''
   var end = new Date()



}).catch(function(err) {
console.log(err)

});




 
 var nickAPI = 'https://query.yahooapis.com/v1/public/yql?q=' + encodeURIComponent('select * from json where url="http://www.nick.com/data/episodes.json?apiKey=jukebox.nick.com"') + '&format=json';
function nick(){
  loaders();

fetch(nickAPI, {
}).then(function(response){
return response.json();

}).then(function(json){
  json = json.query.results.json
  var showsTemp = {}
  var finalObj = []

for(i in json.stream){

for(a in json.stream[i].items){
try{

if (!showsTemp[json.stream[i].items[a].data.seriesTitle]) {

showsTemp[json.stream[i].items[a].data.seriesTitle] = json.stream[i].items[a].data.seriesTitle

}

var  S =  json.stream[i].items[a].data.duration;
var times = S.split(":");
var minutes = times[0];
var seconds = times[1];
seconds = parseInt(seconds, 10) + (parseInt(minutes, 10) * 60);
tvlist(json.stream[i].items[a].data.seriesTitle)

  finalObj.push({img:json.stream[i].items[a].data.images.thumbnail['r16-9'],
    rating:'TV-14',
    href: 'nick.com' + json.stream[i].items[a].data.url,
    airdate:formatDate(json.stream[i].items[a].data.datePosted.source),
    show:json.stream[i].items[a].data.seriesTitle,
    episode:json.stream[i].items[a].data.shortTitle,
    epiformat:json.stream[i].items[a].data.episode,
    length:fmtMSS(seconds),
    metadata:json.stream[i].items[a].data.seriesTitle + json.stream[i].items[a].data.shortTitle,
    type:"nick",
  imgdyn:''

  })


}catch(e){
console.log(e)

}

}


}

sortCards()
loaders('remove');
loadMedia(finalObj)

}).catch(function(e){
  console.log(e)
})

}

loaders()
function fox(range){
fetch('https://feed.theplatform.com/f/fox-mobile/fullepisodes?count=true&form=json&byCustomValue={requiresAuth}{false}', {
	method: 'get',
  cache: "no-store"
}).then(function(response) {
	return response.json();
}).then(function(data){
    var showsTemp = {}
var finalObj = []
for(i in data.entries){
if (!showsTemp[data.entries[i].fox$series]) {

showsTemp[data.entries[i].fox$series] = data.entries[i].fox$series

}

var date = new Date(data.entries[i].media$availableDate)





 date.setDate(date.getDate()-1);





var srcset = ''
var srcobj = []
for (var z = data.entries[i].media$thumbnails.length - 1; z >= 0; z--) {
  var img = data.entries[i].media$thumbnails[z].plfile$url
  img = img.replace('http','https')
  srcobj.push({src:img,width:data.entries[i].media$thumbnails[z].plfile$width})

  // srcset +=  img +' ' + data.entries[i].media$thumbnails[z].plfile$width+ 'w ,  ';

}

srcobj = srcobj.sort(function(a, b){
    if(a.width < b.width) return -1;
    if(a.width > b.width) return 1;
    return 0;
})

srcobj = srcobj.reverse()
for (var y = srcobj.length - 1; y >= 0; y--) {
  var google =   'https://images1-focus-opensocial.googleusercontent.com/gadgets/proxy?container=focus&url='
cdn = 'https://d1r1anxoiubeog.cloudfront.net/' 
srcset += cdn + srcobj[y].src +' ' + srcobj[y].width+ 'w ,  ';

}



  finalObj.push({img:'',
  	rating:rating(data.entries[i].media$ratings[0].rating),
  	href: data.entries[i].media$content[0].plfile$url,
  	airdate:formatDate(date.getTime()),
  	show:data.entries[i].fox$series,
  	episode:data.entries[i].title,
  	epiformat:epiformat(data.entries[i].fox$season,data.entries[i].fox$episode),
  	length:fmtMSS(data.entries[i].media$content[0].plfile$duration),
  	metadata:rating(data.entries[i].media$ratings[0].rating) + formatDate(data.entries[i].media$availableDate) + data.entries[i].fox$series + data.entries[i].title + epiformat(data.entries[i].fox$season,data.entries[i].fox$episode) + fmtMSS(data.entries[i].media$content[0].plfile$duration),
  	type:"fox",
  imgdyn:srcset

  })
tvlist(data.entries[i].fox$series)




   }

loaders('remove');
loadMedia(finalObj)
sortCards()

lazyLoadImages();


}).catch(function(err) {
console.log(err)

});
}
function procABC(showepi){
  var showObj = []

for(a in showepi.videos.video){
 var thumb 

	try{

			if (showepi.videos.video[a].hasOwnProperty('thumbnails')) {
			
thumb = showepi.videos.video[a].thumbnails.thumbnail[0].$		}


	 	 	var airdate = formatDate(showepi.videos.video[a].airdates.airdate)



	}catch(e){
console.log(e)
	}
  showObj.push({img:thumb,
  	rating:(showepi.videos.video[a].tvrating.rating),
  	href: "abc.go.com/vidcode=" + showepi.videos.video[a]['@id'],
  	airdate:airdate,
  	show:showepi.videos.video[a].show.title,
  	episode:showepi.videos.video[a].title,
  	epiformat:epiformat(showepi.videos.video[a].season.trackcode.generic.cseason,showepi.videos.video[a].number),
  	length:msToTime(showepi.videos.video[a].duration['$']),
  	 metadata:(showepi.videos.video[a].tvrating.rating) + airdate + showepi.videos.video[a].show.title + showepi.videos.video[a].show.title + epiformat(showepi.videos.video[a].season.trackcode.generic.cseason,showepi.videos.video[a].number) + msToTime(showepi.videos.video[a].duration['$']),
  	 type:"abc"
});

}
           lazyLoadImages();
loadMedia(showObj)
loaders('remove');
sortCards()

}



function useABC(json){

for(i in json.shows.show){
addJS('https://api.watchabc.go.com/vp2/ws/s/contents/2020/videos/jsonp/001/001/-1/'+json.shows.show[i]['@id']+'/-1/-1/-1/-1?callback=procABC')

}





         loadMedia(obj)

}


// addJS('https://api.watchabc.go.com/vp2/ws/s/contents/2020/shows/jsonp/001/001/-1?callback=useABC')

function fancyTimeFormat(time)
{   
    // Hours, minutes and seconds
    var hrs = ~~(time / 3600);
    var mins = ~~((time % 3600) / 60);
    var secs = Math.floor(time % 60);

    // Output like "1:01" or "4:03:59" or "123:03:59"
    var ret = "";

    if (hrs > 0) {
        ret += "" + hrs + ":" + (mins < 10 ? "0" : "");
    }

    ret += "" + mins + ":" + (secs < 10 ? "0" : "");
    ret += "" + secs;
    return ret;
}




/*
fetch(proxy + 'http://www.adultswim.com/videos/api/v2/videos?fields=title,season_number,collection_title,episode_number,episode,auth,duration,tv_rating,launch_date,type,images,episode,images,title&limit=80&offset=0&sortByDate=DESC&filterByEpisodeType=EPI,TVE&filterByAuthType=true&filterByPlatform=mobile&q=type:episode', {
    method: 'get',
    cache: "no-store"
}).then(function(response) {
    return response.json(); 
}).then(function(data){
      var showsTemp = {}

var start = new Date()

 for(i in data.data){

if (!showsTemp[data.data[i].collection_title]) {

showsTemp[data.data[i].collection_title] = data.data[i].collection_title

}

     function millisToMinutesAndSeconds(millis) {
  var minutes = Math.floor(millis / 60000 * 60);
  var seconds = ((millis % 60000) / 1000).toFixed(0);
  return minutes;
}

var epinum 
try{
epinum = "S" +data.data[i].season_number +"E" +data.data[i].episode_number

}catch(e){
console.log(e) 
}



  loadQuick({img:data.data[i].images[0].url,
    rating:(data.data[i].tv_rating),
    href: "asdir=" +data.data[i].id,
    airdate:formatDate(data.data[i].launch_date),
    show:data.data[i].collection_title,
    episode:data.data[i].title,
    epiformat:epinum,
    length:fancyTimeFormat(data.data[i].duration),
    metadata:data.data[i].tv_rating + data.data[i].launch_date + data.data[i].collection_title + data.data[i].title + epinum + data.data[i].duration,
    type:"adultswim"
  })

 
   }
 loaders('remove');
 tvlist(showsTemp)
sortCards()

      lazyLoadImages();

   var end = new Date()



}).catch(function(err) {
console.log(err.message)
});




*/







   fox('0-200')
//$('#myModal').on('hidden.bs.modal', function () {
//jwplayer().stop();
//});

</script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-66082501-10', 'auto');
  ga('send', 'pageview');

</script>
</body></html>