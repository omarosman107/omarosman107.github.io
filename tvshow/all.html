<!DOCTYPE html>
<html class=''>
<head>
  <!--
<script src="https://www.gstatic.com/firebasejs/4.0.0/firebase.js"></script>
<script type="text/javascript">
   // Initialize Firebase
  // TODO: Replace with your project's customized code snippet
  var config = {
    apiKey: " AIzaSyC5rQaFbnCg0eI-7BavdI_CGHPPuQFhuis",
    authDomain: " tv-stream-5f331.firebaseapp.com",
    databaseURL: "https://tv-stream-5f331.firebaseio.com"
     };
  firebase.initializeApp(config);

</script>
-->
  <link href="https://images1-focus-opensocial.googleusercontent.com" rel="dns-prefetch">
  <meta content="width=device-width, initial-scale=1" name="viewport"><!-- Compiled and minified CSS -->
  <!-- Compiled and minified JavaScript -->

  <style type="text/css">
  h1 {
     margin: 20px 0 10px;
     font-size: 36px;
  }
  h1, h2 {
     font-weight: 500;
     line-height: 1.1;
     color: inherit;
     padding: 13px;
     color: white;
  }
  * {
  }

   body {
          overflow-x: hidden;
     font-size: 16px;
     line-height: 1.428571429;
     margin: 0;
     padding: 0 0 1px;
     background: #111111;
     font-family: ProximaNova,"Helvetica Neue",Helvetica,Arial,sans-serif;
     -webkit-font-smoothing: antialiased;
     -moz-osx-font-smoothing: grayscale;
   }
   .logo {
     width: 75px;
     margin: auto
  }
  .container-1 {
     width: 100%;
     vertical-align: middle;
     white-space: nowrap;
     position: relative
  }

  .container-1 input#search {
     width: 100%;
     height: 50px;
     background: #2b303b;
     border: 0;
     font-size: 16px;
     float: left;
     color: #262626;
     padding-left: 45px;
     border-radius: 1000px;
     -webkit-transition: all .55s ease;
     transition: all .55s ease
  }

  .container-1 input#search::-webkit-input-placeholder {
     color: #65737e
  }

  .container-1 input#search:-moz-placeholder,.container-1 input#search::-moz-placeholder {
     color: #65737e
  }

  .container-1 input#search:-ms-input-placeholder {
     color: #65737e
  }

  .nextContainer {
     margin-bottom: 80px
  }

  .container-1 .icon {
     position: absolute;
     top: 50%;
     margin-left: 17px;
     margin-top: 14px;
     z-index: 1;
     color: #4f5b66
  }

  .btn-floating {
     color: #777
  }

  .container-1 input#search:active,.container-1 input#search:focus {
     outline: 0;
     background: #fff
  }
  @media (min-width:500px) {
     .box {
         width: 650px
     }
  }

  @media (max-width:700px) {
     .tvshow {
         width: 22vw;
     }

  }
  .box {
     height: 50px;
     margin: 61px auto;
     padding-left: 10px;
     padding-right: 10px
  }
  .spinner {
     -webkit-animation: rotator 1.4s linear infinite;
     animation: rotator 1.4s linear infinite
  }

  @-webkit-keyframes rotator {
     0% {
         -webkit-transform: rotate(0deg);
         transform: rotate(0deg)
     }

     to {
         -webkit-transform: rotate(270deg);
         transform: rotate(270deg)
     }
  }

  @keyframes rotator {
     0% {
         -webkit-transform: rotate(0deg);
         transform: rotate(0deg)
     }

     to {
         -webkit-transform: rotate(270deg);
         transform: rotate(270deg)
     }
  }

  @-webkit-keyframes colors {
     0%,25%,50%,75%,to {
         stroke: #fff
     }
  }

  @keyframes colors {
     0%,25%,50%,75%,to {
         stroke: #fff
     }
  }

  @-webkit-keyframes dash {
     0% {
         stroke-dashoffset: 187
     }

     50% {
         stroke-dashoffset: 46.75;
         -webkit-transform: rotate(135deg);
         transform: rotate(135deg)
     }

     to {
         stroke-dashoffset: 187;
         -webkit-transform: rotate(450deg);
         transform: rotate(450deg)
     }
  }

  @keyframes dash {
     0% {
         stroke-dashoffset: 187
     }

     50% {
         stroke-dashoffset: 46.75;
         -webkit-transform: rotate(135deg);
         transform: rotate(135deg)
     }

     to {
         stroke-dashoffset: 187;
         -webkit-transform: rotate(450deg);
         transform: rotate(450deg)
     }
  }
.lScreen {
    width: 100%;
    height: 100%;
    background: #111111;
        position: fixed;
        z-index: 7;
}
.Logoloading {
    width: 25%;
    margin: auto;
    padding-top: 140px;
}
.contain {

}
  </style>
  <title>EPISODES - We provide the best streaming site.</title>
</head>
<body>
<div class="lScreen">
<div class="Logoloading">
          <svg preserveaspectratio="xMidYMid meet" version="1.0" viewbox="0 0 800.000000 800.000000" width="100%" xmlns="http://www.w3.org/2000/svg">

        <g fill="#ffffff" stroke="none" transform="translate(0.000000,800.000000) scale(0.100000,-0.100000)">
          <path d="M230 4980 l0 -1040 1191 0 1191 0 -4 -187 c-3 -182 -4 -190 -32 -251 -52 -112 -148 -177 -298 -202 -40 -6 -429 -10 -1055 -10 l-993 0 0 -485 0 -486 1238 4 c906 3 1258 7 1317 16 288 44 485 109 636 212 224 151 335 356 360 659 6 78 9 624 7 1465 l-3 1340 -587 3 -588 2 0 -550 0 -550 -605 0 -605 0 0 550 0 550 -585 0 -585 0 0 -1040z"></path>
          <path d="M4220 5530 l0 -490 590 0 590 0 0 -1630 0 -1630 590 0 590 0 0 1630 0 1630 595 0 595 0 0 490 0 490 -1775 0 -1775 0 0 -490z"></path>
        </g></svg>
        <div class="loaderHolder" id="loaderHolder"></div>
</div>

</div>
  <div class="contain">
    <p style=" padding-top: 20px; padding-left: 25px;">Made By <a href="https://twitter.com/itsMangoPlays">@itsMangoPlays</a></p><a href="#" onclick="showAll('')">
    <h1 style="text-align:center;font-size:xx-large;padding-top: 100px;">EPISODES</h1></a>
    <button id="myBtn" onclick="topFunction()" title="Go to top"><i aria-hidden="true" class="fa fa-level-up"></i></button>
    <div class="box">
      <div class="container-1">
        <span class="icon"><i class="fa fa-search"></i></span> <input id="search" placeholder="Search..." type="search">
      </div><span id="results"></span>
    </div>
    <h1 id="wtcTxt">CONTINUE WATCHING</h1>
    <div class=" fanarts-list list-unstyled list-inline shows dragscroll" id="watching" onscroll="lazyLoadImages()" style="height: auto;padding: 15px;"></div>
    <h1>SHOWS</h1>
    <div class="shows dragscroll" id="tvShows" ></div>
    <div class="nextContainer" style="display: none;">
      <a class="btn-floating btn-large waves-effect waves-light red" id="left-buttontv"><i class="material-icons">chevron_left</i></a> <a class="btn-floating btn-large waves-effect waves-light red" id="right-buttontv" style="float: right;"><i class="material-icons">chevron_right</i></a>
    </div>
    <ul class="fanarts-list list-unstyled list-inline" id="carasoul"></ul>
    <div class="header">
      <hr>
      <div class="logo">
        <svg preserveaspectratio="xMidYMid meet" version="1.0" viewbox="0 0 800.000000 800.000000" width="100%" xmlns="http://www.w3.org/2000/svg">
        <metadata>
        </metadata>
        <g fill="#ffffff" stroke="none" transform="translate(0.000000,800.000000) scale(0.100000,-0.100000)">
          <path d="M230 4980 l0 -1040 1191 0 1191 0 -4 -187 c-3 -182 -4 -190 -32 -251 -52 -112 -148 -177 -298 -202 -40 -6 -429 -10 -1055 -10 l-993 0 0 -485 0 -486 1238 4 c906 3 1258 7 1317 16 288 44 485 109 636 212 224 151 335 356 360 659 6 78 9 624 7 1465 l-3 1340 -587 3 -588 2 0 -550 0 -550 -605 0 -605 0 0 550 0 550 -585 0 -585 0 0 -1040z"></path>
          <path d="M4220 5530 l0 -490 590 0 590 0 0 -1630 0 -1630 590 0 590 0 0 1630 0 1630 595 0 595 0 0 490 0 490 -1775 0 -1775 0 0 -490z"></path>
        </g></svg>
      </div><a href="log.txt"><span>Changelog</span></a>
    </div>
  </div>
  </script> 
  <script  src="js/fetch.min.js" type="text/javascript">

  </script>
  <script async src="js/dragscroll.js" type="text/javascript">

</script>
<script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>

   <!-- <link async rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
   <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<-->
  <script defer >
  var hovering;

function playHover(element){
  hovering = setTimeout(function(){
        var hls = new Hls();


    var video = element.querySelector('video')
    element.querySelector('.playbutton').style.visibility = 'hidden'
    console.log(video)
    var url = element.getAttribute('url')

      if(Hls.isSupported()) {
    console.log(url)
    hls.attachMedia(video);
    hls.on(Hls.Events.MANIFEST_PARSED,function() {
      video.play();

  });
              element.querySelector('.cover').style.display = 'none';

 }
if (url.includes('cwtv.com')) {
var stripped = url.split('?')[1].split('=')[1]
   // HLS = 154 | 206
   // MP4 = 213
   var url = "http://metaframe.digitalsmiths.tv/v2/CWtv/assets/" + stripped + "/partner/206?format=json"
   fetch(url, {
      method: 'get'
   }).then(function(response) { 
      return response.json();
   }).then(function(data) {
        finalurl = data.videos.variantplaylist.uri;
    hls.loadSource(finalurl);


   })
}
if (url.includes('theplatform')) {
  var finalurl = url.split('?')[0] + "?mbr=true&manifest=m3u&format=redirect"
      hls.loadSource(finalurl);

}  






  },2000)


}
function stopHover(element){
clearTimeout(hovering);
    element.querySelector('.playbutton').style.visibility = 'visible'

    element.querySelector('.cover').style.display = 'block';
    var video = element.querySelector('video')
    video.src ="";
    video.load();

  }
var textInput = document.getElementById('search');

// Init a timeout variable to be used below
var timeout = null;

// Listen for keystroke events
textInput.onkeyup = function (e) {

    // Clear the timeout if it has already been set.
    // This will prevent the previous task from executing
    // if it has been less than <MILLISECONDS>
    clearTimeout(timeout);

    // Make a new timeout set to go off in 800ms
    timeout = setTimeout(function () {
      query(textInput.value)
    }, 200);
};


function addJS(url) {
  var s = document.createElement('script'); // Create a script element
  s.type = "text/javascript"; // optional in html5
  s.async = false; // asynchronous? true/false
  s.src = url;
  var fs = document.getElementsByTagName('script')[0]; // Get the first script
  fs.parentNode.insertBefore(s, fs);
};
// https://github.com/filamentgroup/loadCSS
! function(e) {
  "use strict";
  var n = function(n, t, o) {
    function i(e) {
      return f.body ? e() : void setTimeout(function() {
        i(e)
      })
    }
    var d, r, a, l, f = e.document,
      s = f.createElement("link"),
      u = o || "all";
    return t ? d = t : (r = (f.body || f.getElementsByTagName("head")[0]).childNodes, d = r[r.length - 1]), a = f.styleSheets, s.rel = "stylesheet", s.href = n, s.media = "only x", i(function() {
      d.parentNode.insertBefore(s, t ? d : d.nextSibling)
    }), l = function(e) {
      for (var n = s.href, t = a.length; t--;)
        if (a[t].href === n) return e();
      setTimeout(function() {
        l(e)
      })
    }, s.addEventListener && s.addEventListener("load", function() {
      this.media = u
    }), s.onloadcssdefined = l, l(function() {
      s.media !== u && (s.media = u)
    }), s
  };
  "undefined" != typeof exports ? exports.loadCSS = n : e.loadCSS = n
}("undefined" != typeof global ? global : this);
var stylesheet = loadCSS("css/feed.css");

function logIn(u, p) {
  firebase.auth().signInWithEmailAndPassword(u, p).catch(function(error) {
    // Handle Errors here.
    var errorCode = error.code;
    var errorMessage = error.message;
    console.log(error)
      // ...
  });
  firebase.auth().onAuthStateChanged(firebaseUser => {
    if (firebaseUser) {
      console.log(firebaseUser)
    } else {
      console.log('not logged in')
    }
  })
}
window.onscroll = function() {
  scrollFunction()
};

function scrollFunction() {
  if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
    document.getElementById("myBtn").style.display = "block";
  } else {
    document.getElementById("myBtn").style.display = "none";
  }
}
// When the user clicks on the button, scroll to the top of the document
function topFunction() {
  document.body.scrollTop = 0;
  document.documentElement.scrollTop = 0;
}
/*
function is_touch_device() {
 return 'ontouchstart' in window        // works on most browsers 
     || navigator.maxTouchPoints;       // works on IE10/11 and Surface
};
if(is_touch_device){
           $('#left-buttontv').hide()
           $('#right-buttontv').hide()

}
$('#left-buttontv').show()
           $('#right-buttontv').show()
$(function () {
       var outer = $('#tvShows');

       $('#left-buttontv').click(function () {
          var leftPos = outer.scrollLeft();
          outer.animate({ scrollLeft: leftPos - 900 }, 200);
       });

       $('#right-buttontv').click(function () {
          var leftPos = outer.scrollLeft();
          outer.animate({ scrollLeft: leftPos + 900 }, 200);
       });
    });

*/
function results(num) {
  var res = num + " results found"
  if (num == 1) {
    res = "one result found"
  }
  if (num == 0) {
    res = "no results found"
  }
  if (num == null) {
    res = ""
  }
  document.getElementById('results').innerHTML = res
}
!function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():e.LazyLoad=t()}(this,function(){function e(){c||(d={elements_selector:"img",container:window,threshold:300,throttle:150,data_src:"original",data_srcset:"original-set",class_loading:"loading",class_loaded:"loaded",skip_invisible:!0,callback_load:null,callback_error:null,callback_set:null,callback_processed:null},c=!0)}function t(e,t,i){function o(){return window.innerWidth||h.documentElement.clientWidth||document.body.clientWidth}function a(){return window.innerHeight||h.documentElement.clientHeight||document.body.clientHeight}function s(e){return e.getBoundingClientRect().top+u-h.documentElement.clientTop}function n(e){return e.getBoundingClientRect().left+m-h.documentElement.clientLeft}function r(){var o;return o=t===window?a()+u:s(t)+t.offsetHeight,o<=s(e)-i}function l(){var a;return a=t===window?o()+window.pageXOffset:n(t)+o(),a<=n(e)-i}function d(){var o;return o=t===window?u:s(t),o>=s(e)+i+e.offsetHeight}function c(){var o;return o=t===window?m:n(t),o>=n(e)+i+e.offsetWidth}var h,u,m;return h=e.ownerDocument,u=window.pageYOffset||h.body.scrollTop,m=window.pageXOffset||h.body.scrollLeft,!(r()||d()||l()||c())}function i(){var e=new Date;return e.getTime()}function o(e,t){var i,o={};for(i in e)e.hasOwnProperty(i)&&(o[i]=e[i]);for(i in t)t.hasOwnProperty(i)&&(o[i]=t[i]);return o}function a(e){return Array.prototype.slice.call(e)}function s(e,t){var i=e.parentElement;if("PICTURE"===i.tagName)for(var o=0;o<i.children.length;o++){var a=i.children[o];if("SOURCE"===a.tagName){var s=a.getAttribute("data-"+t);s&&a.setAttribute("srcset",s)}}}function n(e,t,i){var o=e.tagName,a=e.getAttribute("data-"+i);if("IMG"===o){s(e,t);var n=e.getAttribute("data-"+t);return n&&e.setAttribute("srcset",n),void(a&&e.setAttribute("src",a))}return"IFRAME"===o?void(a&&e.setAttribute("src",a)):void(a&&(e.style.backgroundImage="url("+a+")"))}function r(e,t){return function(){return e.apply(t,arguments)}}function l(t){e(),this._settings=o(d,t),this._queryOriginNode=this._settings.container===window?document:this._settings.container,this._previousLoopTime=0,this._loopTimeout=null,this._handleScrollFn=r(this.handleScroll,this),window.addEventListener("resize",this._handleScrollFn),this.update()}var d,c=!1;return l.prototype._showOnAppear=function(e){function t(){e.removeEventListener("load",i),e.classList.remove(o.class_loading),o.callback_error&&o.callback_error(e)}function i(){null!==o&&(o.callback_load&&o.callback_load(e),e.classList.remove(o.class_loading),e.classList.add(o.class_loaded),e.removeEventListener("load",i),e.removeEventListener("error",t))}var o=this._settings;"IMG"!==e.tagName&&"IFRAME"!==e.tagName||(e.addEventListener("load",i),e.addEventListener("error",t),e.classList.add(o.class_loading)),n(e,o.data_srcset,o.data_src),o.callback_set&&o.callback_set(e)},l.prototype._loopThroughElements=function(){var e,i,o=this._settings,a=this._elements,s=a?a.length:0,n=[];for(e=0;s>e;e++)i=a[e],o.skip_invisible&&null===i.offsetParent||t(i,o.container,o.threshold)&&(this._showOnAppear(i),n.push(e),i.wasProcessed=!0);for(;n.length>0;)a.splice(n.pop(),1),o.callback_processed&&o.callback_processed(a.length);0===s&&this._stopScrollHandler()},l.prototype._purgeElements=function(){var e,t,i=this._elements,o=i.length,a=[];for(e=0;o>e;e++)t=i[e],t.wasProcessed&&a.push(e);for(;a.length>0;)i.splice(a.pop(),1)},l.prototype._startScrollHandler=function(){this._isHandlingScroll||(this._isHandlingScroll=!0,this._settings.container.addEventListener("scroll",this._handleScrollFn))},l.prototype._stopScrollHandler=function(){this._isHandlingScroll&&(this._isHandlingScroll=!1,this._settings.container.removeEventListener("scroll",this._handleScrollFn))},l.prototype.handleScroll=function(){var e,t,o;this._settings&&(t=i(),o=this._settings.throttle,0!==o?(e=o-(t-this._previousLoopTime),0>=e||e>o?(this._loopTimeout&&(clearTimeout(this._loopTimeout),this._loopTimeout=null),this._previousLoopTime=t,this._loopThroughElements()):this._loopTimeout||(this._loopTimeout=setTimeout(r(function(){this._previousLoopTime=i(),this._loopTimeout=null,this._loopThroughElements()},this),e))):this._loopThroughElements())},l.prototype.update=function(){this._elements=a(this._queryOriginNode.querySelectorAll(this._settings.elements_selector)),this._purgeElements(),this._loopThroughElements(),this._startScrollHandler()},l.prototype.destroy=function(){window.removeEventListener("resize",this._handleScrollFn),this._loopTimeout&&(clearTimeout(this._loopTimeout),this._loopTimeout=null),this._stopScrollHandler(),this._elements=null,this._queryOriginNode=null,this._settings=null},l});
// Pressure v2.1.1 | Created By Stuart Yamartino | MIT License | 2015 - 2017
!function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():e.Pressure=t()}(this,function(){"use strict";function e(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function t(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var s=0;s<t.length;s++){var n=t[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,s,n){return s&&e(t.prototype,s),n&&e(t,n),t}}(),o={set:function(e,t,s){a(e,t,s)},config:function(e){d.set(e)},map:function(e,t,s,n,i){return f.apply(null,arguments)}},r=function(){function e(t,n,i){s(this,e),this.routeEvents(t,n,i),this.preventSelect(t,i)}return i(e,[{key:"routeEvents",value:function(e,t,s){var n=d.get("only",s);this.adapter=!v||"pointer"!==n&&null!==n?!P||"touch"!==n&&null!==n?!y||"mouse"!==n&&null!==n?new u(e,t).bindUnsupportedEvent():new h(e,t,s).bindEvents():new l(e,t,s).bindEvents():new c(e,t,s).bindEvents()}},{key:"preventSelect",value:function(e,t){d.get("preventSelect",t)&&(e.style.webkitTouchCallout="none",e.style.webkitUserSelect="none",e.style.khtmlUserSelect="none",e.style.MozUserSelect="none",e.style.msUserSelect="none",e.style.userSelect="none")}}]),e}(),u=function(){function e(t,n,i){s(this,e),this.el=t,this.block=n,this.options=i,this.pressed=!1,this.deepPressed=!1,this.nativeSupport=!1,this.runningPolyfill=!1,this.runKey=Math.random()}return i(e,[{key:"setPressed",value:function(e){this.pressed=e}},{key:"setDeepPressed",value:function(e){this.deepPressed=e}},{key:"isPressed",value:function(){return this.pressed}},{key:"isDeepPressed",value:function(){return this.deepPressed}},{key:"add",value:function(e,t){this.el.addEventListener(e,t,!1)}},{key:"runClosure",value:function(e){e in this.block&&this.block[e].apply(this.el,Array.prototype.slice.call(arguments,1))}},{key:"fail",value:function(e,t){d.get("polyfill",this.options)?this.runKey===t&&this.runPolyfill(e):this.runClosure("unsupported",e)}},{key:"bindUnsupportedEvent",value:function(){var e=this;this.add(P?"touchstart":"mousedown",function(t){return e.runClosure("unsupported",t)})}},{key:"_startPress",value:function(e){this.isPressed()===!1&&(this.runningPolyfill=!1,this.setPressed(!0),this.runClosure("start",e))}},{key:"_startDeepPress",value:function(e){this.isPressed()&&this.isDeepPressed()===!1&&(this.setDeepPressed(!0),this.runClosure("startDeepPress",e))}},{key:"_changePress",value:function(e,t){this.nativeSupport=!0,this.runClosure("change",e,t)}},{key:"_endDeepPress",value:function(){this.isPressed()&&this.isDeepPressed()&&(this.setDeepPressed(!1),this.runClosure("endDeepPress"))}},{key:"_endPress",value:function(){this.runningPolyfill===!1?(this.isPressed()&&(this._endDeepPress(),this.setPressed(!1),this.runClosure("end")),this.runKey=Math.random(),this.nativeSupport=!1):this.setPressed(!1)}},{key:"deepPress",value:function(e,t){e>=.5?this._startDeepPress(t):this._endDeepPress()}},{key:"runPolyfill",value:function(e){this.increment=0===d.get("polyfillSpeedUp",this.options)?1:10/d.get("polyfillSpeedUp",this.options),this.decrement=0===d.get("polyfillSpeedDown",this.options)?1:10/d.get("polyfillSpeedDown",this.options),this.setPressed(!0),this.runClosure("start",e),this.runningPolyfill===!1&&this.loopPolyfillForce(0,e)}},{key:"loopPolyfillForce",value:function(e,t){this.nativeSupport===!1&&(this.isPressed()?(this.runningPolyfill=!0,e=e+this.increment>1?1:e+this.increment,this.runClosure("change",e,t),this.deepPress(e,t),setTimeout(this.loopPolyfillForce.bind(this,e,t),10)):(e=e-this.decrement<0?0:e-this.decrement,e<.5&&this.isDeepPressed()&&(this.setDeepPressed(!1),this.runClosure("endDeepPress")),0===e?(this.runningPolyfill=!1,this.setPressed(!0),this._endPress()):(this.runClosure("change",e,t),this.deepPress(e,t),setTimeout(this.loopPolyfillForce.bind(this,e,t),10))))}}]),e}(),h=function(n){function o(t,n,i){return s(this,o),e(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,t,n,i))}return t(o,n),i(o,[{key:"bindEvents",value:function(){this.add("webkitmouseforcewillbegin",this._startPress.bind(this)),this.add("mousedown",this.support.bind(this)),this.add("webkitmouseforcechanged",this.change.bind(this)),this.add("webkitmouseforcedown",this._startDeepPress.bind(this)),this.add("webkitmouseforceup",this._endDeepPress.bind(this)),this.add("mouseleave",this._endPress.bind(this)),this.add("mouseup",this._endPress.bind(this))}},{key:"support",value:function(e){this.isPressed()===!1&&this.fail(e,this.runKey)}},{key:"change",value:function(e){this.isPressed()&&e.webkitForce>0&&this._changePress(this.normalizeForce(e.webkitForce),e)}},{key:"normalizeForce",value:function(e){return this.reachOne(f(e,1,3,0,1))}},{key:"reachOne",value:function(e){return e>.995?1:e}}]),o}(u),l=function(n){function o(t,n,i){return s(this,o),e(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,t,n,i))}return t(o,n),i(o,[{key:"bindEvents",value:function(){g?(this.add("touchforcechange",this.start.bind(this)),this.add("touchstart",this.support.bind(this,0)),this.add("touchend",this._endPress.bind(this))):(this.add("touchstart",this.startLegacy.bind(this)),this.add("touchend",this._endPress.bind(this)))}},{key:"start",value:function(e){e.touches.length>0&&(this._startPress(e),this.touch=this.selectTouch(e),this.touch&&this._changePress(this.touch.force,e))}},{key:"support",value:function(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.runKey;this.isPressed()===!1&&(e<=6?(e++,setTimeout(this.support.bind(this,e,t,s),10)):this.fail(t,s))}},{key:"startLegacy",value:function(e){this.initialForce=e.touches[0].force,this.supportLegacy(0,e,this.runKey,this.initialForce)}},{key:"supportLegacy",value:function(e,t,s,n){n!==this.initialForce?(this._startPress(t),this.loopForce(t)):e<=6?(e++,setTimeout(this.supportLegacy.bind(this,e,t,s,n),10)):this.fail(t,s)}},{key:"loopForce",value:function(e){this.isPressed()&&(this.touch=this.selectTouch(e),setTimeout(this.loopForce.bind(this,e),10),this._changePress(this.touch.force,e))}},{key:"selectTouch",value:function(e){if(1===e.touches.length)return this.returnTouch(e.touches[0],e);for(var t=0;t<e.touches.length;t++)if(e.touches[t].target===this.el||this.el.contains(e.touches[t].target))return this.returnTouch(e.touches[t],e)}},{key:"returnTouch",value:function(e,t){return this.deepPress(e.force,t),e}}]),o}(u),c=function(n){function o(t,n,i){return s(this,o),e(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,t,n,i))}return t(o,n),i(o,[{key:"bindEvents",value:function(){this.add("pointerdown",this.support.bind(this)),this.add("pointermove",this.change.bind(this)),this.add("pointerup",this._endPress.bind(this)),this.add("pointerleave",this._endPress.bind(this))}},{key:"support",value:function(e){this.isPressed()===!1&&(0===e.pressure||.5===e.pressure?this.fail(e,this.runKey):(this._startPress(e),this._changePress(e.pressure,e)))}},{key:"change",value:function(e){this.isPressed()&&e.pressure>0&&.5!==e.pressure&&(this._changePress(e.pressure,e),this.deepPress(e.pressure,e))}}]),o}(u),d={polyfill:!0,polyfillSpeedUp:1e3,polyfillSpeedDown:0,preventSelect:!0,only:null,get:function(e,t){return t.hasOwnProperty(e)?t[e]:this[e]},set:function(e){for(var t in e)e.hasOwnProperty(t)&&this.hasOwnProperty(t)&&"get"!=t&&"set"!=t&&(this[t]=e[t])}},a=function(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("string"==typeof e||e instanceof String)for(var n=document.querySelectorAll(e),i=0;i<n.length;i++)new r(n[i],t,s);else if(p(e))new r(e,t,s);else for(var i=0;i<e.length;i++)new r(e[i],t,s)},p=function(e){return"object"===("undefined"==typeof HTMLElement?"undefined":n(HTMLElement))?e instanceof HTMLElement:e&&"object"===(void 0===e?"undefined":n(e))&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName},f=function(e,t,s,n,i){return(e-t)*(i-n)/(s-t)+n},y=!1,P=!1,v=!1,b=!1,g=!1;if("undefined"!=typeof window){if("undefined"!=typeof Touch)try{(Touch.prototype.hasOwnProperty("force")||"force"in new Touch)&&(b=!0)}catch(e){}P="ontouchstart"in window.document&&b,y="onmousemove"in window.document&&!P,v="onpointermove"in window.document,g="ontouchforcechange"in window.document}return o});



function addJS(url) {
  var s = document.createElement('script'); // Create a script element
  s.type = "text/javascript"; // optional in html5
  s.async = true; // asynchronous? true/false
  s.src = url;
  var fs = document.getElementsByTagName('script')[0]; // Get the first script
  fs.parentNode.insertBefore(s, fs);
};
document.getElementById('loaderHolder').innerHTML += '<svg  class="spinner" width="65px" height="65px" viewBox="0 0 66 66" xmlns="http://www.w3.org/2000/svg"><circle class="path" fill="none" stroke-width="6" stroke-linecap="round" cx="33" cy="33" r="30"><\/circle><\/svg>'
var num = 0

function loaders(atr) {
  if (atr == 'remove') {
    num = num - 1
    if (num - 1 == -1) {
      var child = document.getElementsByClassName('spinner')[0]
      document.getElementById('loaderHolder').removeChild(child)
      if (!document.getElementById('search').value == '') {
        query(document.getElementById('search').value)
      }
      if (document.getElementById('watching').children.length == 0) {
        document.getElementById('wtcTxt').style.display = 'none'
      }
      document.getElementsByClassName('lScreen')[0].style.display = 'none'
      document.querySelector('.contain').style.display = 'block';


console.log('done')

     // lazyLoadImages()
    }
    if (document.getElementsByClassName('spinner').length == 0) {
     // lazyLoadImages()
    }
    return;
  }
  num++
}

function makeid() {
  var text = "";
  var possible = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";
  for (var i = 0; i < 96; i++) text += possible.charAt(Math.floor(Math.random() * possible.length));
  return text;
}

function query(q) {
  var num = 0
  setTimeout(function() {
    for (var i = 0, len = obj.length; i < len; i++) {
      if (obj[i].metadata.toLowerCase().includes(q.toLowerCase())) {
        document.getElementsByClassName(obj[i].id)[0].style.opacity = '1'
                document.getElementsByClassName(obj[i].id)[0].style.display = 'inline-block';

        num = num + 1
      } else {
        document.getElementsByClassName(obj[i].id)[0].style.opacity = '0'
                        document.getElementsByClassName(obj[i].id)[0].style.display = 'none';

      }
    }
    results(num)
    lazyLoadImages();
  }, 10)
}
function showAll(q){
    document.getElementById('search').value = '';

  var num = 0
  setTimeout(function() {
    for (var i = 0, len = obj.length; i < len; i++) {
        document.getElementsByClassName(obj[i].id)[0].style.opacity = '1'
                        document.getElementsByClassName(obj[i].id)[0].style.display = 'inline-block'

        num = num + 1
      }
 results(num)
    lazyLoadImages();
  }, 10)


}
function scrollShows() {
  element = document.getElementById("carasoul")

  function elementInViewport2(el) {
    var top = el.offsetTop;
    var left = el.offsetLeft;
    var width = el.offsetWidth;
    var height = el.offsetHeight;
    while (el.offsetParent) {
      el = el.offsetParent;
      top += el.offsetTop;
      left += el.offsetLeft;
    }
    return (top < (window.pageYOffset + window.innerHeight) && left < (window.pageXOffset + window.innerWidth) && (top + height) > window.pageYOffset && (left + width) > window.pageXOffset);
  }
  if (!elementInViewport2(element)) {
    element = document.getElementById("carasoul")
    element.scrollIntoView(true);
  }
}

function showQuery(q, o) {
  if (q == null) {
    q = o.getAttribute('show')
      //   document.body.style.background = 'url(' + obj.getAttribute('bg') + ") no-repeat center center fixed";
  };
  document.getElementById('search').value = q
  var num = 0
  setTimeout(function() {
    for (var i = 0, len = obj.length; i < len; i++) {
      if (obj[i].show.toLowerCase() == (q.toLowerCase())) {
        document.getElementsByClassName(obj[i].id)[0].style.opacity = '1'
                        document.getElementsByClassName(obj[i].id)[0].style.display = 'inline-block';

        num = num + 1
      } else {
        document.getElementsByClassName(obj[i].id)[0].style.opacity = '0'
                document.getElementsByClassName(obj[i].id)[0].style.display = 'none';

      }
    }
    scrollShows()
    lazyLoadImages()
    results(num)
  }, 10)
}
var tvobj = {}



function tvstQ(q) {
  q = encodeURIComponent(q);
  var query = 'https://query.yahooapis.com/v1/public/yql?q=' + encodeURIComponent('select all_images.poster from json where url="https://api.tozelabs.com/v2/show?limit=1&q=' + q + '"') + '&format=json&_maxage=360000';
  return query;
}

function yqltheTVDB(q) {
  q = encodeURIComponent(q);
  var query = 'https://query.yahooapis.com/v1/public/yql?q=' + encodeURIComponent('select * from json where url="http://skyhook.sonarr.tv/v1/tvdb/search/en/?term=' + q + '"') + '&format=json&_maxage=36000';
  return query;
}

function multiURL(urls) {
  q = encodeURIComponent(urls);
  var query = "select all_images.poster,stripped_name from json where url='https://api.tozelabs.com/v2/show?limit=1&q=" + q + "';"
  return query;
}
var tvdbimg = 'https://thetvdb.com/banners/posters/279121-50.jpg'

function tvlist(showName) {
  if (showName in tvobj) {
    return 'Already In.';
  }
  var finalList = ''
    /*  for(i in showName){

       finalList += multiURL(showName[i])
     }
     showName = 
    finalList = ('select * from yql.query.multi where queries="'+finalList + '"')

     var url = 'https://query.yahooapis.com/v1/public/yql?q=' + encodeURIComponent(finalList) +  '&format=json&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys&callback=';
    */
  tvobj[(showName)] = ''
  url = tvstQ(showName)
  fetch(url, {
    method: 'get',
    cache: "force-cache"
  }).then(function(response) {
    return response.json();
  }).then(function(dat) {
    /*  for (var i = dat.query.results.results.length - 1; i >= 0; i--) {
       try{
       document.getElementById('tvShows').innerHTML += '<div tabindex="1" class="tvshow">  <a href="javascript:"  title="'+dat.query.results.results[i].json.stripped_name+'" bg="" show="' + dat.query.results.results[i].json.stripped_name +'" onclick="query(null,this)" ><img width="100%" alt="'+dat.query.results.results[i].json.stripped_name+'" src="'+dat.query.results.results[i].json.all_images.poster._[3]+'"><\/a><\/div>'
    }catch(e){
     console.log(e)
    }

     }
     */
    document.getElementById('tvShows').innerHTML += '<div tabindex="1" class="tvshow js-tilt" data-tilt>  <a href="javascript:"  title="' + showName + '" bg="" show="' + showName + '" onclick="showQuery(null,this)" ><img width="100%" alt="' + showName + '" src="' + dat.query.results.json.all_images.poster._[4] + '"><\/a><\/div>'
  }).catch(function(e) {});
}

function search(val) {
  function filter(a) {
    var match = []
    for (var i = 0; i < a.length; i++) {
      if (a[i].metadata.toLowerCase().includes(val.toLowerCase())) match.push(a[i])
    }
    return match
  }
  var result = filter(obj);
  if (result.length == 0) {
    document.getElementById('carasoul').innerHTML = "No results found :("
  } else {
    loadMedia(result)
  }
  lazyLoadImages();
}

function sortCards() {
  /*

  var sorted = obj.sort(function(a, b) {
    var a = new Date(a.airdate)
    var b = new Date(b.airdate)
    if (a < b) {
      return -1;
    }
    if (a > b) {
      return 1;
    }
    return 0;
  }).reverse();
  var c = '';

        var formatter = new Intl.DateTimeFormat( {
        month: "short"
      })
                var date1 = new Date();

  sorted.forEach(function(json){

            var date2 = new Date(json.airdate);

      function newBanner() {
        //Customise date2 for your required future time
        var diff = (date2 - date1) / 1000;
        var diff = Math.abs(Math.floor(diff));
        var days = Math.floor(diff / (24 * 60 * 60));
        var leftSec = diff - days * 24 * 60 * 60;
        var hrs = Math.floor(leftSec / (60 * 60));
        var leftSec = leftSec - hrs * 60 * 60;
        var min = Math.floor(leftSec / (60));
        var leftSec = leftSec - min * 60;
        if (days <= 1) {
          return '<div class="new-label"> New<\/div>'
        } else {
          return ''
        }
      }
      var perc = 0;
      if (localStorage["?" + json.href]) {
        perc = localStorage["?" + json.href + "_perc"]
        if (perc == "NaN") {
          perc = 0
        }
        if (perc == undefined) {
          perc = 0
        }
      }

      function showCheck() {
        if (perc > 99) {
          return 1;
          alert('finished')
        }
        return 0;
      }

      var query = (json.metadata + " " + json.episode).toLowerCase();
      timeofPlayback = json.length.split(':')[0] + 'm'
      var img = ''
      if (json.imgdyn == '') {
        img = 'data-original="' + json.img + '"'
      }

      if (json.airdate == 'NaN-NaN-NaN') {
        json.airdate = '2017-01-01'
      }

      date2.setDate(date2.getDate() + 1);
      var month2 = formatter.format(date2);



          var FDate = month2 + ' ' + date2.getUTCDate() + ' ' + date2.getUTCFullYear()
      FDate = month2
      var e = '<li  aired="' + json.airdate + '"  ShowName="' + json.show + '" class="initialized ' + json.type + '  ' + json.id + '" data-query="' + query + '"><div  class="piece fanart-container"><div class="image-crop sixteen-nine">' + newBanner() + '<a onclick="loadPlayer(this)" href="newplayer.html?' + json.href + '"><\/span><div class="imageBG"><\/div><img     class="cover sixteen-nine"  sizes="(min-width: 600px) 25vw, (min-width: 500px) 50vw, 100vw" alt="' + json.show + '"  ' + img + ' data-original-set="' + json.imgdyn + '" class"lazy1" ><i class="fa fa-play-circle-o" aria-hidden="true"><\/i><\/a><span class="episode-gradient"><\/span><div id="projpar" class="w3-progress-container" style=""><div id="progress" class="w3-progressbar" style="width: ' + perc + '%;"><\/div><\/div><div class="overlay"><a onclick="loadPlayer(this)" href="newplayer.html?' + json.href + '" class="overlay-btn zoom-btn " title="Watch ' + json.episode + '"><i class="fa fa-play playbutton"><\/i><\/a><\/div><\/div><div class="episode-details fanart-details"><h2 ><a class="episode-name" onclick="loadPlayer(this)" href="newplayer.html?' + json.href + '">' + json.episode + '<\/a><\/h2><a onclick="showQuery(null,this)" show="' + json.show + '" href="javascript:" class="secondary-link show-name">' + json.show + '<\/a><div class=more-infos><\/div><p>' + FDate + ' | ' + json.rating + ' | ' + timeofPlayback + ' | ' + json.epiformat + '<\/p><i style="opacity:' + showCheck() + ';color:rgb(127, 218, 99);"class="visited fa fa-check" aria-hidden="true"><\/i><\/div><div class="bottom"><div class="bar"><\/div><div class="bar"><\/div><div class="bar"><\/div><\/div><\/div><\/li>'

      c = c + (e);
  });
  document.getElementById('carasoul').innerHTML = (c);
  lazyLoadImages()


  */
  setTimeout(function(e){

  var p = document.getElementById('carasoul')
  Array.prototype.slice.call(p.children).map(function(x) {
    return p.removeChild(x);
  }).sort(function(x, y) {
    var date1 = x.getAttribute('aired');
    date1 = new Date(date1);
    var date2 = y.getAttribute('aired');
    date2 = new Date(date2);
    return date1 < date2 ? 1 : -1;
  }).forEach(function(x) {
    p.appendChild(x);
  });
  },10)

}
var theflash = 'http://images.cwtv.com/feed/mobileapp/videos/apiversion_7/show_the-flash'
var show_hub = 'http://images.cwtv.com/feed/mobileapp/videos/apiversion_7/show_hub'
var shows = 'http://images.cwtv.com/feed/mobileapp/shows/apiversion_7/channel_cwtv/pagesize_100'
var proxy = 'https://cors-anywhere.herokuapp.com/'
var template = "";
if (!window.fetch) {
  alert('fetch isnt working')
}

function formatDate(date) {
  var d = new Date(date),
    month = '' + (d.getMonth() + 1),
    day = '' + d.getDate(),
    year = d.getFullYear();
  if (month.length < 2) month = '0' + month;
  if (day.length < 2) day = '0' + day;
  return [year, month, day].join('-');
}
// url (required), options (optional)
function fmtMSS(s) {
  return (s - (s %= 60)) / 60 + (9 < s ? ':' : ':0') + Math.trunc(s)
}

function rating(rate) {
  if (rate.includes('tv-14')) {
    return "TV-14"
  }
  if (rate.includes('tv-pg')) {
    return "TV-PG"
  }
  if (rate.includes('tv-y7')) {
    return "TV-Y7"
  }
  if (rate.includes('tv-y')) {
    return "TV-Y"
  }
  if (rate.includes('tv-g')) {
    return "TV-G"
  }
}
var myLazyLoad = new LazyLoad({
  threshold: 300,
});

function lazyLoadImages() {
  myLazyLoad.update()
}

function loadPlayer(url) {
  link = url.href
  return false;
 }
/*

   $('#tvShows').scroll( function() {
       var $width = $('#tvShows').outerWidth()
       var $scrollWidth = $('#tvShows')[0].scrollWidth; 
       var $scrollLeft = $('#tvShows').scrollLeft();
           $('#right-buttontv').css({opacity: 100})

       if ($scrollWidth - $width === $scrollLeft){
           console.log('right end');
           $('#right-buttontv').fadeTo('fast',0 )
       }
                       $('#left-buttontv').css({opacity: 100})

       if ($scrollLeft===0){
           console.log('left end');
                       $('#left-buttontv').fadeTo('fast',0 )

       }
   });
   */
function loadQuick(json) {
  var temp = ''

  function newBanner() {
    var date1 = new Date();
    var date2 = new Date(json.airdate);
    //Customise date2 for your required future time
    var diff = (date2 - date1) / 1000;
    var diff = Math.abs(Math.floor(diff));
    var days = Math.floor(diff / (24 * 60 * 60));
    var leftSec = diff - days * 24 * 60 * 60;
    var hrs = Math.floor(leftSec / (60 * 60));
    var leftSec = leftSec - hrs * 60 * 60;
    var min = Math.floor(leftSec / (60));
    var leftSec = leftSec - min * 60;
    if (days <= 1) {
      return '<div class="new-label"> New<\/div>'
    } else {
      return ''
    }
  }
  var perc = 0;
  if (localStorage["?" + json.href]) {
    perc = localStorage["?" + json.href + "_perc"]
    if (perc == "NaN") {
      perc = 0
    }
    if (perc == undefined) {
      perc = 0
    }
  }

  function showCheck() {
    if (parseInt(perc) > 99) {
      return 1;
    }
    return 0;
  }
  if (!perc == 0) {
    if (document.getElementsByClassName(json.href).length == 0) {
      document.getElementById('watching').innerHTML += '<li style="width: 280px;margin: 11px;" class=" card initialized ' + json.href + '"><a href="#"><div class="piece fanart-container"><div class="image-crop">' + newBanner() + '<a onclick="loadPlayer(this)" href="player.html?' + json.href + '"><\/span><img  src="' + json.img + '" alt="' + json.episode + '" data-original-set="' + json.imgdyn + '" class"lazy" class="loaded" ><\/a><div id="projpar" class="w3-progress-container" style=""><span class="episode-gradient"><\/span><div id="progress" class="w3-progressbar" style="width: ' + perc + '%;"><\/div><\/div><div class="overlay"><a onclick="loadPlayer(this)" href="newplayer.html?' + json.href + '" class="overlay-btn zoom-btn "  title="Watch ' + json.episode + '"><i class="fa fa-play playbutton"><\/i><\/a><\/div><\/div><div class="episode-details fanart-details"><h2><a class="episode-name" onclick="loadPlayer(this)" href="player.html?' + json.href + '">' + json.episode + '<\/a><\/h2><a onclick="loadPlayer(this)" href="" class="secondary-link show-name">' + json.show + '<\/a><a href="javascript:"><i style="    /* opacity: ' + showCheck() + '; */color: rgb(127, 218, 99);position: absolute;right: 10px;bottom: 10px;display:none;" class="visited fa fa-check" aria-hidden="true"><\/i><\/a><\/div><div class="bottom"><\/div><\/div><\/a><\/li>'
    }
  }
  var query = (json.metadata + " " + json.episode).toLowerCase();
  timeofPlayback = json.length.split(':')[0] + 'm'
  var img = ''
  if (json.imgdyn == '') {
    img = 'data-original="' + json.img + '"'
  }
  var formatter = new Intl.DateTimeFormat("en", {
    month: "short"
  })
  var date = new Date(json.airdate)
  var month2 = formatter.format(date);
  var FDate = month2 + ' ' + date.getUTCDate() + ' ' + date.getUTCFullYear()
  document.getElementById('carasoul').innerHTML += '<li  aired="' + json.airdate + '" class="initialized ' + json.type + '" data-query="' + query + '"><div  class="piece fanart-container"><div class=image-crop>' + newBanner() + '<a onclick="loadPlayer(this)" href="player.html?' + json.href + '"><\/span><img alt="' + json.show + '"  ' + img + ' data-original-set="' + json.imgdyn + '" class"lazy" ><\/a><div id="projpar" class="w3-progress-container" style=""><span class="episode-gradient"><\/span><div id="progress" class="w3-progressbar" style="width: ' + perc + '%;"><\/div><\/div><div class="overlay"><a onclick="loadPlayer(this)" href="newplayer.html?' + json.href + '" class="overlay-btn zoom-btn " title="Watch ' + json.episode + '"><i class="fa fa-play playbutton"><\/i><\/a><\/div><\/div><div class="episode-details fanart-details"><h2 ><a class="episode-name" onclick="loadPlayer(this)" href="newplayer.html?' + json.href + '">' + json.episode + '<\/a><\/h2><a onclick="query(null,this)" show="' + json.show + '" href="javascript:" class="secondary-link show-name">' + json.show + '<\/a><div class=more-infos><\/div><p>' + FDate + ' | ' + json.rating + ' | ' + timeofPlayback + ' | ' + json.epiformat + '<\/p><i style="opacity:' + showCheck() + ';color:rgb(127, 218, 99);"class="visited fa fa-check" aria-hidden="true"><\/i><\/div><div class="bottom"><div class="bar"><\/div><div class="bar"><\/div><div class="bar"><\/div><\/div><\/div>'
}

function arrayUnique(array) {
  var a = array.concat();
  for (var i = 0; i < a.length; ++i) {
    for (var j = i + 1; j < a.length; ++j) {
      if (a[i] === a[j]) a.splice(j--, 1);
    }
  }
  return a;
}
var formatter = new Intl.DateTimeFormat({
  month: "short"
})
var date1 = new Date();

function loadMedia(json) {
  obj = arrayUnique(obj.concat(json))
  json = json.sort(function(a, b) {
    a = new Date(a.airdate);
    b = new Date(b.airdate);
    return a > b ? -1 : a < b ? 1 : 0;
  })
  var template = ''
  var watching = ''
  for (i in json) {
    var date2 = new Date(json[i].airdate);

    function newBanner() {
      //Customise date2 for your required future time
      var diff = (date2 - date1) / 1000;
      var diff = Math.abs(Math.floor(diff));
      var days = Math.floor(diff / (24 * 60 * 60));

      if (days == 0) {
        return '<div class="new-label"> New<\/div>'
      } else {
        return ''
      }
    }
    var perc = 0;
    if (localStorage["?" + json[i].href]) {
      perc = localStorage["?" + json[i].href + "_perc"]
      if (perc == "NaN") {
        perc = 0
      }
      if (perc == undefined) {
        perc = 0
      }
    }

    function showCheck() {

      if (perc > 99) {
        return 1;
        alert('finished')
      }
      return 0;
    }
    var done = perc > 99
    if (!done && perc > 0.4) {
      if (document.getElementsByClassName(json[i].href).length == 0) {
        //  document.getElementById('watching').innerHTML += '<div tabindex="1" class="wtc '+json[i].href+'"><a onclick="loadPlayer(this)" href="player.html?'+json[i].href+'" ><img width="100%" src="'+json[i].img+'"><div id="projpar" class="w3-progress-container" style=""><div id="progress" class="w3-progressbar" style="width: '+perc+'%;"><\/div><\/div><br> <span>'+json[i].show+'<\/span><\/a><\/div>'
        watching += '<li style="width: 280px;margin: 11px;" class=" card  ' + json[i].href + '"><a href="#"><div style="    height: 280px;" class="piece fanart-container"><div class="image-crop sixteen-nine">' + newBanner() + '<a onclick="loadPlayer(this)" href="newplayer.html?' + json[i].href + '"><\/span><div class="imageBG"><\/div><img    class="cover sixteen-nine "   sizes="(min-width: 600px) 25vw, (min-width: 500px) 50vw, 100vw"   alt="' + json[i].episode + '" data-original-set="' + json[i].imgdyn + '" class"" class="cover" ><i class="fa fa-play-circle-o" aria-hidden="true"><\/i><\/a><span class="episode-gradient"><\/span><div id="projpar" class="w3-progress-container" style=""><div id="progress" class="w3-progressbar" style="width: ' + perc + '%;"><\/div><\/div><div class="overlay"><a onclick="loadPlayer(this)" href="newplayer.html?' + json[i].href + '" class="overlay-btn zoom-btn "  title="Watch ' + json[i].episode + '"><i class="fa fa-play playbutton"><\/i><\/a><\/div><\/div><div class="episode-details fanart-details"><h2><a class="episode-name" onclick="loadPlayer(this)" href="newplayer.html?' + json[i].href + '">' + json[i].episode + '<\/a><\/h2><a onclick="showQuery(null,this)"  show="' + json[i].show + '" href="javascript:" class="secondary-link show-name">' + json[i].show + '<\/a><a href="javascript:"><i style="    /* opacity: ' + showCheck() + '; */color: rgb(127, 218, 99);position: absolute;right: 10px;bottom: 10px;display:none;" class="visited fa fa-check" aria-hidden="true"><\/i><\/a><\/div><div class="bottom"><\/div><\/div><\/a><\/li>'
      }
    }
    var query = (json[i].metadata + " " + json[i].episode).toLowerCase();
    timeofPlayback = json[i].length.split(':')[0] + 'm'
    var img = ''
    if (json[i].imgdyn == '') {
      img = 'data-original="' + json[i].img + '"'
    }
    if (json[i].airdate == 'NaN-NaN-NaN') {
      json[i].airdate = '2017-01-01'
    }
    date2.setDate(date2.getDate() + 1);
    var month2 = formatter.format(date2);
    var FDate = month2 + ' ' + date2.getUTCDate() + ' ' + date2.getUTCFullYear()
    FDate = month2
    var out = "'out'"
    template = template + '<li  aired="' + json[i].airdate + '"  ShowName="' + json[i].show + '" class="initialized  ' + json[i].type + '  ' + json[i].id + '" data-query="' + query + '"><div  class="piece fanart-container"><div class="image-crop sixteen-nine" url="'+json[i].href+'" onmouseover="playHover(this)" onmouseout="stopHover(this)">' + newBanner() + '<a onclick="loadPlayer(this)" href="newplayer.html?' + json[i].href + '"><video class="sixteen-nine" style="top:0px;" playsinline muted loop width="100%" height="100%"></video><\/span><div class="imageBG"><\/div><img     class="cover sixteen-nine"  sizes="(min-width: 600px) 25vw, (min-width: 500px) 50vw, 100vw" alt="' + json[i].show + '"  ' + img + ' data-original-set="' + json[i].imgdyn + '" class"lazy1" ><i class="fa fa-play-circle-o" aria-hidden="true"><\/i><\/a><span class="episode-gradient"><\/span><div id="projpar" class="w3-progress-container" style=""><div id="progress" class="w3-progressbar" style="width: ' + perc + '%;"><\/div><\/div><div class="overlay"><a onclick="loadPlayer(this)" href="newplayer.html?' + json[i].href + '" class="overlay-btn zoom-btn " title="Watch ' + json[i].episode + '"><i class="fa fa-play playbutton"><\/i><\/a><\/div><\/div><div class="episode-details fanart-details"><h2 ><a class="episode-name" onclick="loadPlayer(this)" href="newplayer.html?' + json[i].href + '">' + json[i].episode + '<\/a><\/h2><a onclick="showQuery(null,this)" show="' + json[i].show + '" href="javascript:" class="secondary-link show-name">' + json[i].show + '<\/a><div class=more-infos><\/div><p>' + FDate + ' | ' + json[i].rating + ' | ' + timeofPlayback + ' | ' + json[i].epiformat + '<\/p><i style="opacity:' + showCheck() + ';color:rgb(127, 218, 99);"class="visited fa fa-check" aria-hidden="true"><\/i><\/div><div class="bottom"><div class="bar"><\/div><div class="bar"><\/div><div class="bar"><\/div><\/div><\/div><\/li>'
  }
  document.getElementById('watching').innerHTML += watching
  document.getElementById('carasoul').innerHTML += template;
  template = '';
  lazyLoadImages()
}

function epiformat(s, e) {
  s = parseInt(s)
  e = parseInt(e)
  if (s < 10) {
    s = '0' + s
  }
  if (e < 10) {
    e = '0' + e
  }
  return 'S' + s + 'E' + e
}

function toTitleCase(str) {
  return str.replace(/\w\S*/g, function(txt) {
    return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();
  });
}

function msToTime(duration) {
  var milliseconds = parseInt((duration % 1000) / 100),
    seconds = parseInt((duration / 1000) % 60),
    minutes = parseInt((duration / (1000 * 60)) % 60),
    hours = parseInt((duration / (1000 * 60 * 60)) % 24);
  hours = (hours < 10) ? "0" + hours : hours;
  minutes = (minutes < 10) ? "0" + minutes : minutes;
  seconds = (seconds < 10) ? "0" + seconds : seconds;
  return minutes + ":" + seconds;
}
var template = "";
var obj = []
var cors_show_hub = 'https://crossorigin.me/' + show_hub
var show_hub = 'https://query.yahooapis.com/v1/public/yql?q=' + encodeURIComponent('select * from json where url="' + show_hub + '"') + '&format=json&bust=' + (new Date()).getTime();
loaders()
fetch(show_hub, {
  method: 'get',
  cache: "no-store"
}).then(function(response) {
  return response.json();
}).then(function(data) {
  data = data.query.results.json
  var start = new Date()
  var showsTemp = {}
  var finalObj = []
  for (i in data.videos) {
    if (data.videos[i].fullep == 1) {
      if (!showsTemp[data.videos[i].series_name]) {
        showsTemp[data.videos[i].series_name] = data.videos[i].series_name
      }

      function millisToMinutesAndSeconds(millis) {
        var minutes = Math.floor(millis / 60000 * 60);
        var seconds = ((millis % 60000) / 1000).toFixed(0);
        return minutes;
      }
      var epinum = data.videos[i].episode
      try {
        epinum = data.videos[i].availability_asset_id.split('-')[data.videos[i].availability_asset_id.split('-').length - 1]
        var s = (data.videos[i].availability_asset_id.split('-')[data.videos[i].availability_asset_id.split('-').length - 1].split('E')[0].split('S')[1])
        var e = (data.videos[i].availability_asset_id.split('-')[data.videos[i].availability_asset_id.split('-').length - 1].split('E')[1])
      } catch (e) {
        console.log(e)
      }
      var dyn = data.videos[i].large_thumbnail + " 720w  ," + data.videos[i].medium_thumbnail + ' 210w'
      tvlist(data.videos[i].series_name)
      var episode_data = {
        img: data.videos[i].medium_thumbnail,
        rating: (data.videos[i].rating),
        imgdyn: dyn,
        id: makeid(),
        href: data.videos[i].share_url,
        airdate: data.videos[i].airdate,
        show: data.videos[i].series_name,
        episode: data.videos[i].title,
        epiformat: epiformat(s, e),
        length: data.videos[i].duration,
        metadata: data.videos[i].rating + data.videos[i].airdate + data.videos[i].series_name + data.videos[i].title + epinum + data.videos[i].duration,
        type: "cw"
      }
      finalObj.push(episode_data)
    }
  }
  loadMedia(finalObj)
  sortCards()
  loaders('remove');
  template = ''
  var end = new Date()
}).catch(function(err) {
  console.log(err)
});
var nickAPI = 'https://query.yahooapis.com/v1/public/yql?q=' + encodeURIComponent('select * from json where url="http://www.nick.com/data/episodes.json?apiKey=jukebox.nick.com"') + '&format=json&bust=' + (new Date()).getTime();

function nick() {
  loaders();
  fetch(nickAPI, {}).then(function(response) {
    return response.json();
  }).then(function(json) {
    json = json.query.results.json
    var showsTemp = {}
    var finalObj = []
    for (i in json.stream) {
      for (a in json.stream[i].items) {
        try {
          if (!showsTemp[json.stream[i].items[a].data.seriesTitle]) {
            showsTemp[json.stream[i].items[a].data.seriesTitle] = json.stream[i].items[a].data.seriesTitle
          }
          var S = json.stream[i].items[a].data.duration;
          var times = S.split(":");
          var minutes = times[0];
          var seconds = times[1];
          seconds = parseInt(seconds, 10) + (parseInt(minutes, 10) * 60);
          tvlist(json.stream[i].items[a].data.seriesTitle)
          var date = formatDate(json.stream[i].items[a].data.datePosted.source)
          if (date == 'NaN-NaN-NaN') {
            date = formatDate('1/1/2017')
          }
          var image = json.stream[i].items[a].data.images.thumbnail['r16-9'].split('=')
          image[1] = '0.40';
          image = image.join();
          finalObj.push({
            img: image,
            rating: 'TV-14',
            href: 'nick.com' + json.stream[i].items[a].data.url,
            id: makeid(),
            airdate: formatDate(json.stream[i].items[a].data.datePosted.source),
            show: json.stream[i].items[a].data.seriesTitle,
            episode: json.stream[i].items[a].data.shortTitle,
            epiformat: json.stream[i].items[a].data.episode,
            length: fmtMSS(seconds),
            metadata: json.stream[i].items[a].data.seriesTitle + json.stream[i].items[a].data.shortTitle,
            type: "nick",
            imgdyn: ''
          })
        } catch (e) {}
      }
    }
    sortCards()
    loaders('remove');
    loadMedia(finalObj)
  }).catch(function(e) {})
}
loaders()

function fox(range) {
  fetch('https://feed.theplatform.com/f/fox-mobile/fullepisodes?count=true&form=json&byCustomValue={requiresAuth}{false}', {
    method: 'get',
    cache: "no-store"
  }).then(function(response) {
    return response.json();
  }).then(function(data) {
    var showsTemp = {}
    var finalObj = []
    for (i in data.entries) {
      if (!showsTemp[data.entries[i].fox$series]) {
        showsTemp[data.entries[i].fox$series] = data.entries[i].fox$series
      }
      var date = new Date(data.entries[i].media$availableDate)
      date.setDate(date.getDate() - 1);
      var srcset = ''
      var srcobj = []
      for (var z = data.entries[i].media$thumbnails.length - 1; z >= 0; z--) {
        var img = data.entries[i].media$thumbnails[z].plfile$url
        img = img.replace('http', 'https')
        srcobj.push({
          src: img,
          width: data.entries[i].media$thumbnails[z].plfile$width
        })
        srcset += img + ' ' + data.entries[i].media$thumbnails[z].plfile$width + 'w ,  ';
      }
      srcobj = srcobj.sort(function(a, b) {
        if (a.width < b.width) return -1;
        if (a.width > b.width) return 1;
        return 0;
      })
      srcobj = srcobj.reverse()
        /* for (var y = srcobj.length - 1; y >= 0; y--) {
          var google = 'https://images1-focus-opensocial.googleusercontent.com/gadgets/proxy?container=focus&url='
          cdn = 'https://d1r1anxoiubeog.cloudfront.net/'
          srcset += cdn + srcobj[y].src + ' ' + srcobj[y].width + 'w ,  ';
        }
        */
      finalObj.push({
        img: '',
        rating: rating(data.entries[i].media$ratings[0].rating),
        href: data.entries[i].media$content[0].plfile$url,
        airdate: formatDate(date.getTime()),
        show: data.entries[i].fox$series,
        episode: data.entries[i].title,
        id: makeid(),
        epiformat: epiformat(data.entries[i].fox$season, data.entries[i].fox$episode),
        length: fmtMSS(data.entries[i].media$content[0].plfile$duration),
        metadata: rating(data.entries[i].media$ratings[0].rating) + formatDate(data.entries[i].media$availableDate) + data.entries[i].fox$series + data.entries[i].title + epiformat(data.entries[i].fox$season, data.entries[i].fox$episode) + fmtMSS(data.entries[i].media$content[0].plfile$duration),
        type: "fox",
        imgdyn: srcset
      })
      tvlist(data.entries[i].fox$series)
    }
    loaders('remove');
    loadMedia(finalObj)
    sortCards()
  }).catch(function(err) {
    console.log(err)
  });
}

function procABC(showepi) {
  var showObj = []
  for (a in showepi.videos.video) {
    var thumb
    try {
      if (showepi.videos.video[a].hasOwnProperty('thumbnails')) {
        thumb = showepi.videos.video[a].thumbnails.thumbnail[0].$
      }
      var airdate = formatDate(showepi.videos.video[a].airdates.airdate)
    } catch (e) {
      console.log(e)
    }
    showObj.push({
      img: thumb,
      rating: (showepi.videos.video[a].tvrating.rating),
      href: "abc.go.com/vidcode=" + showepi.videos.video[a]['@id'],
      airdate: airdate,
      show: showepi.videos.video[a].show.title,
      episode: showepi.videos.video[a].title,
      id: makeid(),
      epiformat: epiformat(showepi.videos.video[a].season.trackcode.generic.cseason, showepi.videos.video[a].number),
      length: msToTime(showepi.videos.video[a].duration['$']),
      metadata: (showepi.videos.video[a].tvrating.rating) + airdate + showepi.videos.video[a].show.title + showepi.videos.video[a].show.title + epiformat(showepi.videos.video[a].season.trackcode.generic.cseason, showepi.videos.video[a].number) + msToTime(showepi.videos.video[a].duration['$']),
      type: "abc"
    });
  }
  loadMedia(showObj)
  loaders('remove');
  sortCards()
}

function useABC(json) {
  for (i in json.shows.show) {
    addJS('https://api.watchabc.go.com/vp2/ws/s/contents/2020/videos/jsonp/001/001/-1/' + json.shows.show[i]['@id'] + '/-1/-1/-1/-1?callback=procABC')
  }
  loadMedia(obj)
}
// addJS('https://api.watchabc.go.com/vp2/ws/s/contents/2020/shows/jsonp/001/001/-1?callback=useABC')
function fancyTimeFormat(time) {
  // Hours, minutes and seconds
  var hrs = ~~(time / 3600);
  var mins = ~~((time % 3600) / 60);
  var secs = Math.floor(time % 60);
  // Output like "1:01" or "4:03:59" or "123:03:59"
  var ret = "";
  if (hrs > 0) {
    ret += "" + hrs + ":" + (mins < 10 ? "0" : "");
  }
  ret += "" + mins + ":" + (secs < 10 ? "0" : "");
  ret += "" + secs;
  return ret;
}
/*
fetch(proxy + 'http://www.adultswim.com/videos/api/v2/videos?fields=title,season_number,collection_title,episode_number,episode,auth,duration,tv_rating,launch_date,type,images,episode,images,title&limit=80&offset=0&sortByDate=DESC&filterByEpisodeType=EPI,TVE&filterByAuthType=true&filterByPlatform=mobile&q=type:episode', {
   method: 'get',
   cache: "no-store"
}).then(function(response) {
   return response.json(); 
}).then(function(data){
     var showsTemp = {}

var start = new Date()

for(i in data.data){

if (!showsTemp[data.data[i].collection_title]) {

showsTemp[data.data[i].collection_title] = data.data[i].collection_title

}

    function millisToMinutesAndSeconds(millis) {
 var minutes = Math.floor(millis / 60000 * 60);
 var seconds = ((millis % 60000) / 1000).toFixed(0);
 return minutes;
}

var epinum 
try{
epinum = "S" +data.data[i].season_number +"E" +data.data[i].episode_number

}catch(e){
console.log(e) 
}



 loadQuick({img:data.data[i].images[0].url,
   rating:(data.data[i].tv_rating),
   href: "asdir=" +data.data[i].id,
   airdate:formatDate(data.data[i].launch_date),
   show:data.data[i].collection_title,
   episode:data.data[i].title,
   epiformat:epinum,
   length:fancyTimeFormat(data.data[i].duration),
   metadata:data.data[i].tv_rating + data.data[i].launch_date + data.data[i].collection_title + data.data[i].title + epinum + data.data[i].duration,
   type:"adultswim"
 })


  }
loaders('remove');
tvlist(showsTemp)
sortCards()

     lazyLoadImages();

  var end = new Date()



}).catch(function(err) {
console.log(err.message)
});




*/
fox('0-200')
  //$('#myModal').on('hidden.bs.modal', function () {
  //jwplayer().stop();
  //});
  </script> 
  <script>
   (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
   (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
   m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
   })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

   ga('create', 'UA-66082501-10', 'auto');
   ga('send', 'pageview');

  </script>
</body>
</html>