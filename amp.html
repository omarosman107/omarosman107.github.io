<!DOCTYPE html>
<html>

<head>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/nprogress/0.2.0/nprogress.min.css" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/nprogress/0.2.0/nprogress.min.js"></script>
<script> NProgress.start();</script>
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
<div id="cssdiv">

</div>
    <!-- Compiled and minified CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.8/css/materialize.min.css">

    <!-- Compiled and minified JavaScript -->


    <style>
        #preload-01 {
            background: url("logow.png") no-repeat -9999px -9999px;
        }

        thead {
            border-bottom: 0px solid #d0d0d0;
        }

        body {}

        h1 {}

        .jumbotron {
            text-align: center;
            padding: 5%;
            background: #F5F5F5;
        }

        div#channelimg {
            width: 50%;
        }

        @media screen and (-webkit-min-device-pixel-ratio:0) {
            select,
            textarea,
            input {
                font-size: 16px;
            }
        }

        @media screen and (orientation:portrait) {
            .mdl-textfield {
                width: 100%;
                max-width: 100%;
                margin: auto;
            }
            div#channelimg {}
        }

        @media (min-width: 601px) {
            #cssswitch {
                display: inline-block;
                text-align: right;
                padding-right: 2%;
                padding-top: 1%;
                padding-bottom: 1%
            }
        }

        @media screen and (orientation:portrait) {
            #cssswitch {
                display: inline-block;
                text-align: right;
                padding-right: 4%;
                padding-top: 3%;
                padding-bottom: 3%
            }
        }

        @media (min-width: 601px) {
            .mdl-textfield {
                width: 60%;
                max-width: 100%;
                margin: auto;
            }
            .mdl-data-table {
                width: 80%;
                margin: auto;
            }
        }


        img {
            fill: red;
        }

        td,
        th {
            text-align: center;
        }

        #title {
            font-size: 18px;
            display: inline-block;
            float: left;
        }

        #wrapper {
            text-align: right;
        }

        tbody {
            background: #F5F5F5;
        }

        #checkmark {
            display: inline-block;
            padding-right: 1%;
        }

        [type="checkbox"]+label {
            display: initial;
            !important;
            padding-right: 2%;
        }
        .preloader-wrapper.active {
            margin-top: 5%;
        }
        #nav-mobile li.search {
    position: absolute;
    left: 0;
    right: 0;
    top: 120px;
    margin-top: 1px;
    padding: 1px 0 0 0;
    z-index: 2;
}
nav {
    color: #fff;
    background-color: rgb(0, 150, 136);
    width: 100%;
    height: 56px;
    line-height: 56px;
}
    </style>
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />

    <meta name="apple-mobile-web-app-capable" content="yes">

    <meta name="apple-mobile-web-app-title" content="YT SubCount" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />


    <title>YT Modern Subcount</title>
</head>

<body onload="NProgress.done()">

    <div class="hidden">
        <script type="text/javascript">
            <!--//--><![CDATA[//><!--
            var images = new Array()

            function preload() {
                for (i = 0; i < preload.arguments.length; i++) {
                    images[i] = new Image()
                    images[i].src = preload.arguments[i]
                }
            }
            preload(
                    "logow.png"

                )
                //--><!]]>
        </script>
    </div>
    <div id="wrapper">



        <div class="switch" id="cssswitch">

            <label>
                Light
                <input type="checkbox" name="materialcheckbox" id="switch">
                <span class="lever"></span> Dark
            </label>
        </div>
        <input class="filled-in" type="checkbox" id="checkmark" />
        <label for="checkmark">Remember</label>


    </div>
    <div id="jumbo" class="jumbotron">








        <img id="logotop" height="120px" width="120px" src="logo.svg">
        <p>
            This is a beta so please DM me <a href="https://twitter.com/mangodirt">@mangodirt </a> for ideas or bugs that you have found!
            <p>

                <hr class="m-y-2" />


                <div class="form-group">



                    <!-- Textfield with Floating Label -->

                   



  <div class="row">
        <div class="input-field col s12">
          <input id="search" type="text" oninput="loadsub();" class="validate">
          <label for="search">Enter Channel</label>
        </div>
      </div>
                </div>

                <!-- Colored FAB button with ripple -->

                <a onclick="loadsub()" class="btn-floating btn-large waves-effect waves-light teal"><i class="material-icons left">search</i>search</a>

                <div id="spinner">
                  <div id="spinnera" class="preloader-wrapper big ">
      <div class="spinner-layer spinner-blue">
        <div class="circle-clipper left">
          <div class="circle"></div>
        </div><div class="gap-patch">
          <div class="circle"></div>
        </div><div class="circle-clipper right">
          <div class="circle"></div>
        </div>
      </div>

                </div>

                
                <table class="mdl-data-table mdl-js-data-table mdl-data-table">
                    <thead>
                        <tr>
                            <th>Profile</th>
                            <th>Channel Name</th>
                            <th>Subs</th>
                            <th>Total Views</th>
                        </tr>
                    </thead>
                    <tbody id="tbody">


                        <tr>

                            <th scope="row">

                            <div id="channelimg">

                                    <a id="link" href="#">
                                        <img height="100%" width="100%" id="channelprofile"></div>
                            </th>
                            <td>
                                <div id="channeln"></div>
                                </a>
                            </td>
                            <td>
                                <div id="channelsub"></div>
                            </td>
                            <td>
                                <div id="channelview"></div>
                            </td>
                        </tr>


                        <tr>

                            <th scope="row">
                                <div id="channelimg">
                                    <a id="link2" href="#">

                                        <img height="100%" width="100%" id="channelprofile2"></div>
                            </th>
                            <td>
                                <div id="channeln2"></div>
                                </a>
                            </td>
                            <td>
                                <div id="channelsub2"></div>
                            </td>
                            <td>
                                <div id="channelview2"></div>
                            </td>
                        </tr>
                    </tbody>
                </table>
                <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
                <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.8/js/materialize.min.js"></script>
                <script>
                NProgress.configure({ showSpinner: false });



                    function shortenNumber(num, decimalPlaces) {
                        var str,
                            suffix = '';

                        decimalPlaces = decimalPlaces || 0;
                        num = +num;

                        var factor = Math.pow(10, decimalPlaces);


                        //99999 -> 99.9K

                        if (num < 1000) {
                            str = num;
                        } else if (num < 1000000) {
                            str = Math.floor(num / (1000 / factor)) / factor;
                            suffix = 'K';
                        } else if (num < 1000000000) {
                            str = Math.floor(num / (1000000 / factor)) / factor;
                            suffix = 'M';
                        } else if (num < 1000000000000) {
                            str = Math.floor(num / (1000000000 / factor)) / factor;
                            suffix = 'B';
                        } else if (num < 1000000000000000) {
                            str = Math.floor(num / (1000000000000 / factor)) / factor;
                            suffix = 'T';
                        }
                        return str + suffix;
                    }


                    function loadCSS(e, t, n) {
                        "use strict";
                        var i = window.document.createElement("link");
                        var o = t || window.document.getElementsByTagName("script")[0];
                        i.rel = "stylesheet";
                        i.href = e;
                        i.media = "only x";
                        o.parentNode.insertBefore(i, o);
                        setTimeout(function() {
                            i.media = n || "all"
                        })
                    }
                    loadCSS("");

                    https: //www.googleapis.com/youtube/v3/channels?part=statistics&id=UC5uDqiEEXm_3Vsrl-5F2V7g&fields=items/statistics&key=AIzaSyDEoLUnWe9oL-3jyscdTg-gQd4DLRx72mo


                        var namelink1 = ("https://www.googleapis.com/youtube/v3/search?part=snippet&q=");
                    var namelink2 = ("&fields=items/id/channelId&type=channel&maxResults=2&key=AIzaSyCrIMmwqmqGYvrOV-AgFBoLPxrTRRfqkY4")

                    var link1 = ("https://www.googleapis.com/youtube/v3/channels?part=statistics,snippet&id=");
                    var link2 = ("&fields=items/snippet/thumbnails/high/url,items/statistics/subscriberCount,items/snippet/localized/title,items/statistics/viewCount&key=AIzaSyANLBp5fHf-XEsQnksu_-ygJMHviGQO7TY")
                    var spinner = document.getElementById('spinnera');
                    var lineload = document.getElementById('lineload');


                    var table = document.getElementById('table');


                    var profile = document.getElementById('channelprofile');
                    var name = document.getElementById('channeln');
                    var subs = document.getElementById('channelsub');
                    var views = document.getElementById('channelview');
                    var ytid = document.getElementById('search');

                    var link = document.getElementById('link');

                    var profile2 = document.getElementById('channelprofile2');
                    var name2 = document.getElementById('channeln2');
                    var subs2 = document.getElementById('channelsub2');
                    var views2 = document.getElementById('channelview2');
                    var ytid2 = document.getElementById('ytchannelid2');

                    var href2 = document.getElementById('link2');

                    var logo = document.getElementById('logotop');
                    var checkmark = document.getElementById('checkmark');

                    var remember = document.getElementById('switch');

                    if (localStorage.itschecked == "false") {
                        remember.checked = false
                        checkmark.checked = true
                        validate()
                    }

                    if (localStorage.itschecked == "true") {
                        remember.checked = true
                        checkmark.checked = true

                        validate()
                    }


                    function loadsub() {
                      NProgress.start();

                      spinner.classList.value = "preloader-wrapper big active"
                        $.getJSON(namelink1 + ytid.value + namelink2, function(convert) {


if(convert.items[0] == undefined) {

console.log("working");
views.innerHTML = "";
subs.innerHTML = "";
views2.innerHTML = "";
subs2.innerHTML = "";
profile.src = "";
profile2.src = "";
link.href = "";
href2.href = "";
channeln.innerHTML = "";
channeln2.innerHTML = "";



}

if (convert.items[0]) {

console.log("arrived");

}
                            $.getJSON(link1 + convert.items[0].id.channelId + link2, function(data) {
                                subs.innerHTML = data.items[0].statistics.subscriberCount;
                                views.innerHTML = (data.items[0].statistics.viewCount);
 NProgress.inc()
                                if (screen.width < 500) {
                                    views.innerHTML = (shortenNumber(data.items[0].statistics.viewCount));
                                    subs.innerHTML = (shortenNumber(data.items[0].statistics.subscriberCount));

                                }

                            $.getJSON(link1 + convert.items[1].id.channelId + link2, function(data2) {
                                subs2.innerHTML = data2.items[0].statistics.subscriberCount;
                                views2.innerHTML = (data2.items[0].statistics.viewCount);
 NProgress.inc()
                                if (screen.width < 500) {
                                    views2.innerHTML = (shortenNumber(data2.items[0].statistics.viewCount));
                                    subs2.innerHTML = (shortenNumber(data2.items[0].statistics.subscriberCount));

                                }



                                document.getElementById('channeln').innerHTML = data.items[0].snippet.localized.title;
                                profile.src = data.items[0].snippet.thumbnails.high.url;

                                link.href = "https://youtube.com/channel/" + convert.items[0].id.channelId;


                                document.getElementById('channeln2').innerHTML = data2.items[0].snippet.localized.title;
                                profile2.src = data2.items[0].snippet.thumbnails.high.url;

                                href2.href = "https://youtube.com/channel/" + convert.items[1].id.channelId;


                                spinner.classList.value = "preloader-wrapper big"
                                NProgress.done()
                            });

                            });
                        });




                    }





                    function validate() {

                        if (remember.checked == false) {
                            console.log("not night yet")
                            reverse()
                        } else {}

                        var checkmark = document.getElementById('checkmark');

                        if (checkmark.checked == true ) {
                            console.log("saving...")
                            localStorage.setItem('itschecked', remember.checked);


                        } else {}

                        if (checkmark.checked == false ) {
                            console.log("deleting...")
                            localStorage.removeItem('itschecked', '');


                        } else {}

                        if (remember.checked) {
                            console.log("make dark mode!")
                            makeDark()
                        } else {}
                    }

                    $('#checkmark').click(function() {
                        validate()

                    });

                    $('#switch').click(function() {
                        validate()

                    });





                    function makeDark() {

                        document.body.style.backgroundColor = "#303030";
                        document.body.style.color = "white";
                        document.getElementById('jumbo').style.backgroundColor = "#424242";
                        document.getElementById('tbody').style.backgroundColor = "#585858";
                        logo.src = "logow.png"



                    }


                    function reverse() {

                        document.body.style.backgroundColor = "#ffffff";
                        document.body.style.color = "black";
                        document.getElementById('jumbo').style.backgroundColor = "#F5F5F5";
                        document.getElementById('tbody').style.backgroundColor = "#F5F5F5";
                        logo.src = "logo.svg"



                    }



                    function getStylesheet() {
                        if (checkmark.checked == false) {
                            var currentTime = new Date().getHours();
                            if (0 <= currentTime && currentTime < 5) {
                                // night
                                remember.checked = true
                                validate()
                            }
                            if (5 <= currentTime && currentTime < 11) {
                                // morning

                                remember.checked = false
                                validate()
                            }
                            if (11 <= currentTime && currentTime < 16) {
                                // day

                                remember.checked = false
                                validate()
                            }
                            if (18 <= currentTime && currentTime < 22) {
                                // evening
                                remember.checked = true
                                validate()
                            }
                            if (22 <= currentTime && currentTime <= 24) {
                                // night
                                remember.checked = true
                                validate()
                            }
                        }

                    }
                    // document.write("<link rel='stylesheet' href='night.css' type='text/css'>"); for dynamic css!




                    if (checkmark.checked == true) {
                        console.log("not going to do auto css change :(");
                    } else {
                      getStylesheet()
                        setInterval(getStylesheet, 10000);

                    }
                </script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-66082501-6', 'auto');
  ga('send', 'pageview');

</script>
</body>

</html>
